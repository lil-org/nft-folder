let paletteJSON=[["Magic waters","#69d2e7","#a7dbd8","#e0e4cc","#f38630","#fa6900"],["Creamy strawberries","#fe4365","#fc9d9a","#f9cdad","#c8c8a9","#83af9b"],["Electric planet","#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],["Chocolate day","#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"],["Saharan coffee","#e8ddcb","#cdb380","#036564","#033649","#031634"],["Luxury wine","#490a3d","#bd1550","#e97f02","#f8ca00","#8a9b0f"],["Robot industry","#594f4f","#547980","#45ada8","#9de0ad","#e5fcc2"],["Sioux saddle","#00a0b0","#6a4a3c","#cc333f","#eb6841","#edc951"],["Pink Panther","#e94e77","#d68189","#c6a49a","#c6e5d9","#f4ead5"],["Mint candy","#3fb8af","#7fc7af","#dad8a7","#ff9e9d","#ff3d7f"],["Sunny winter","#efffcd","#dce9be","#555152","#2e2633","#99173c"],["Blue technology","#343838","#005f6b","#008c9e","#00b4cc","#00dffc"],["Violet twilight","#413e4a","#73626e","#b38184","#f0b49e","#f7e4be"],["Orange clock","#ff4e50","#fc913a","#f9d423","#ede574","#e1f5c4"],["Prehistoric Hawaii","#99b898","#fecea8","#ff847c","#e84a5f","#2a363b"],["After eight","#655643","#80bca3","#f6f7bd","#e6ac27","#bf4d28"],["Evening party","#351330","#424254","#64908a","#e8caa4","#cc2a41"],["Autumn ride","#554236","#f77825","#d3ce3d","#f1efa5","#60b99a"],["Serious T-shirt","#5d4157","#838689","#a8caba","#cad7b2","#ebe3aa"],["Mexican restaurant","#8c2318","#5e8c6a","#88a65e","#bfb35a","#f2c45a"],["Simple mandarin","#fad089","#ff9c5b","#f5634a","#ed303c","#3b8183"],["African flamingo","#f8b195","#f67280","#c06c84","#6c5b7b","#355c7d"],["Juice company","#d1e751","#ffffff","#000000","#4dbce9","#26ade4"],["Lime forest","#1b676b","#519548","#88c425","#bef202","#eafde6"],["Cremino at the bar","#5e412f","#fcebb6","#78c0a8","#f07818","#f0a830"],["Harvest time","#452632","#91204d","#e4844a","#e8bf56","#e2f7ce"],["Car scent","#eee6ab","#c5bc8e","#696758","#45484b","#36393b"],["Arabian night","#2a044a","#0b2e59","#0d6759","#7ab317","#a0c55f"],["Aniseed yogurt","#b9d7d9","#668284","#2a2829","#493736","#7b3b3b"],["Field of melons","#b3cc57","#ecf081","#ffbe40","#ef746f","#ab3e5b"],["Fruit salad","#a3a948","#edb92e","#f85931","#ce1836","#009989"],["Halloween night","#300030","#480048","#601848","#c04848","#f07241"],["Mint and licorice","#67917a","#170409","#b8af03","#ccbf82","#e33258"],["Blueberry cake","#ab526b","#bca297","#c5ceae","#f0e2a4","#f4ebc3"],["Backyard grass","#607848","#789048","#c0d860","#f0f0d8","#604848"],["Candy shop","#a8e6ce","#dcedc2","#ffd3b5","#ffaaa6","#ff8c94"],["Milan FC","#fc354c","#29221f","#13747d","#0abfbc","#fcf7c5"],["Surgical orange","#cc0c39","#e6781e","#c8cf02","#f8fcc1","#1693a7"],["Campsite parking","#1c2130","#028f76","#b3e099","#ffeaad","#d14334"],["Italian wedding","#a7c5bd","#e5ddcb","#eb7b59","#cf4647","#524656"],["Maldives beach","#dad6ca","#1bb0ce","#4f8699","#6a5e72","#563444"],["Man in red","#5c323e","#a82743","#e15e32","#c0d23e","#e5f04c"],["Crayons Box","#edebe6","#d6e1c7","#94c7b6","#403b33","#d3643b"],["70s linen","#fdf1cc","#c6d6b8","#987f69","#e3ad40","#fcd036"],["Night ladybug","#230f2b","#f21d41","#ebebbc","#bce3c5","#82b3ae"],["Fruit sorbet","#b9d3b0","#81bda4","#b28774","#f88f79","#f6aa93"],["Dwight suit","#3a111c","#574951","#83988e","#bcdea5","#e6f9bc"],["Persimmon apple","#5e3929","#cd8c52","#b7d1a3","#dee8be","#fcf7d3"],["Profondo rosso","#1c0113","#6b0103","#a30006","#c21a01","#f03c02"],["Onyx and garnets","#000000","#9f111b","#b11623","#292c37","#cccccc"],["Strawberry and chocolate","#382f32","#ffeaf2","#fcd9e5","#fbc5d8","#f1396d"],["Mountain lemonade","#e3dfba","#c8d6bf","#93ccc6","#6cbdb5","#1a1f1e"],["Frozen poppies","#f6f6f6","#e8e8e8","#333333","#990100","#b90504"],["Stars and stripes","#1b325f","#9cc4e4","#e9f2f9","#3a89c9","#f26c4f"],["Strawberry field","#a1dbb2","#fee5ad","#faca66","#f7a541","#f45d4c"],["Puddle","#c1b398","#605951","#fbeec2","#61a6ab","#accec0"],["Hospital entrance","#8dccad","#988864","#fea6a2","#f9d6ac","#ffe9af"],["Undergrowth","#2d2d29","#215a6d","#3ca2a2","#92c7a3","#dfece6"],["Tropical leaves","#eff3cd","#b2d5ba","#61ada0","#248f8d","#605063"],["Beached","#ffefd3","#fffee4","#d0ecea","#9fd6d2","#8b7a5e"],["Burning mint","#cfffdd","#b4dec1","#5c5863","#a85163","#ff1f4c"],["Serious girl","#a8a7a7","#cc527a","#e8175d","#474747","#363636"],["Creole lady","#f8edd1","#d88a8a","#474843","#9d9d93","#c5cfc6"],["Incoming winter","#4e4d4a","#353432","#94ba65","#2790b0","#2b4e72"],["Window in the sky ","#0ca5b0","#4e3f30","#fefeeb","#f8f4e4","#a5b3aa"],["Fallen noble","#4d3b3b","#de6262","#ffb88c","#ffd0b3","#f5e0d3"],["Sunny palms","#fffbb7","#a6f6af","#66b6ab","#5b7c8d","#4f2958"],["Desert border","#edf6ee","#d1c089","#b3204d","#412e28","#151101"],["Deep forest","#30261c","#403831","#36544f","#1f5f61","#0b8185"],["Swimsuit","#aaff00","#ffaa00","#ff00aa","#aa00ff","#00aaff"],["Tomato puree","#d1313d","#e5625c","#f9bf76","#8eb2c5","#615375"],["Ice cream shop","#ffe181","#eee9e5","#fad3b2","#ffba7f","#ff9c97"],["Golf club","#73c8a9","#dee1b6","#e1b866","#bd5532","#373b44"],["Plant nursery","#379f7a","#78ae62","#bbb749","#e0fbac","#1f1c0d"],["Green light","#caff42","#ebf7f8","#d0e0eb","#88abc2","#49708a"],["Lavender cake","#75616b","#bfcff7","#dce4f7","#f8f3bf","#d34017"],["Desire at night","#111625","#341931","#571b3c","#7a1e48","#9d2053"],["Grass on the concrete","#82837e","#94b053","#bdeb07","#bffa37","#e0e0e0"],["Quiet vacation","#7e5686","#a5aad9","#e8f9a2","#f8a13f","#ba3c3d"],["Parisian cafe","#312736","#d4838f","#d6abb1","#d9d9d9","#c4ffeb"],["Central Africa","#395a4f","#432330","#853c43","#f25c5e","#ffa566"],["Delicate clash","#fde6bd","#a1c5ab","#f4dd51","#d11e48","#632f53"],["Night harvest","#261c21","#6e1e62","#b0254f","#de4126","#eb9605"],["Desert tea","#efd9b4","#d6a692","#a39081","#4d6160","#292522"],["Salmon showcase1","#f2e3c6","#ffc6a5","#e6324b","#2b2b2b","#353634"],["Brick house","#c75233","#c78933","#d6ceaa","#79b5ac","#5e2f46"],["Late grape","#793a57","#4d3339","#8c873e","#d1c5a5","#a38a5f"],["Early grape","#512b52","#635274","#7bb0a8","#a7dbab","#e4f5b1"],["Orange juice","#11644d","#a0b046","#f2c94e","#f78145","#f24e4e"],["Caddie","#59b390","#f0ddaa","#e47c5d","#e32d40","#152b3c"],["American Goldfinch","#fdffd9","#fff0b8","#ffd6a3","#faad8e","#142f30"],["Pineapple and cherry","#b5ac01","#ecba09","#e86e1c","#d41e45","#1b1521"],["Emergency room","#c7fcd7","#d9d5a7","#d9ab91","#e6867a","#ed4a6a"],["South Africa","#11766d","#410936","#a40b54","#e46f0a","#f0b300"],["Woodstock mud","#595643","#4e6b66","#ed834e","#ebcc6e","#ebe1c5"],["Purple disco","#331327","#991766","#d90f5a","#f34739","#ff6e27"],["Goldfish","#efeecc","#fe8b05","#fe0557","#400403","#0aabba"],["Raspberry milkshake","#bf496a","#b39c82","#b8c99d","#f0d399","#595151"],["Colorado waters","#e5eaa4","#a8c4a2","#69a5a4","#616382","#66245b"],["Antarctica mission","#e0eff1","#7db4b5","#ffffff","#680148","#000000"],["Fresh mint","#b1e6d1","#77b1a9","#3d7b80","#270a33","#451a3e"],["Japanese pagoda","#e4ded0","#abccbd","#7dbeb8","#181619","#e32f21"],["Old cadillac","#e9e0d1","#91a398","#33605a","#070001","#68462b"],["Spritz","#fc284f","#ff824a","#fea887","#f6e7f7","#d1d0d7"],["Chicks army","#ffab07","#e9d558","#72ad75","#0e8d94","#434d53"],["Cactus","#6da67a","#99a66d","#a9bd68","#b5cc6a","#c0de5d"],["Vinegar","#311d39","#67434f","#9b8e7e","#c3ccaf","#a51a41"],["Guacamole","#cfb590","#9e9a41","#758918","#564334","#49281f"],["Toy aquarium","#5cacc4","#8cd19d","#cee879","#fcb653","#ff5254"],["Turin sky","#44749d","#c6d4e1","#ffffff","#ebe7e0","#bdb8ad"],["Wet sand","#807462","#a69785","#b8faff","#e8fdff","#665c49"],["Chicken coop","#e7edea","#ffc52c","#fb0c06","#030d4f","#ceecef"],["Plastic spring","#ccf390","#e0e05a","#f7c41f","#fc930a","#ff003d"],["Galleon","#2b222c","#5e4352","#965d62","#c7956d","#f2d974"],["Terracotta","#cc5d4c","#fffec6","#c7d1af","#96b49c","#5b5847"],["Gummy candies","#e3e8cd","#bcd8bf","#d3b9a3","#ee9c92","#fe857e"],["Tokyo night","#360745","#d61c59","#e7d84b","#efeac5","#1b8798"],["Red carpet","#ec4401","#cc9b25","#13cd4a","#7b6ed6","#5e525c"],["Desert eagle","#eb9c4d","#f2d680","#f3ffcf","#bac9a9","#697060"],["Bahamas cottage","#f2e8c4","#98d9b6","#3ec9a7","#2b879e","#616668"],["Adriatico winter","#f5dd9d","#bcc499","#92a68a","#7b8f8a","#506266"],["Autumn lights","#fff3db","#e7e4d5","#d3c8b4","#c84648","#703e3b"],["Illuminated shrubs","#041122","#259073","#7fda89","#c8e98e","#e6f99d"],["Petra","#8d7966","#a8a39d","#d8c8b8","#e2ddd9","#f8f1e9"],["Apartment by the sea","#c6cca5","#8ab8a8","#6b9997","#54787d","#615145"],["Haunted house","#4b1139","#3b4058","#2a6e78","#7a907c","#c9b180"],["Night water lilies","#2d1b33","#f36a71","#ee887a","#e4e391","#9abc8a"],["Mantis","#f0ffc9","#a9da88","#62997a","#72243d","#3b0819"],["Mole lair","#429398","#6b5d4d","#b0a18f","#dfcdb4","#fbeed3"],["Bridesmaid","#9d9e94","#c99e93","#f59d92","#e5b8ad","#d5d2c8"],["War of opposites","#95a131","#c8cd3b","#f6f1de","#f5b9ae","#ee0b5b"],["Twilight Aperitif","#322938","#89a194","#cfc89a","#cc883a","#a14016"],["Cabernet Sauvignon","#540045","#c60052","#ff714b","#eaff87","#acffe9"],["Fragolino","#79254a","#795c64","#79927d","#aeb18e","#e3cf9e"],["Funfair","#452e3c","#ff3d5a","#ffb969","#eaf27e","#3b8c88"],["Immersion","#2b2726","#0a516d","#018790","#7dad93","#bacca4"],["English house","#fa6a64","#7a4e48","#4a4031","#f6e2bb","#9ec6b8"],["Caterpillar","#23192d","#fd0a54","#f57576","#febf97","#f5ecb7"],["Citrus fruits","#f6d76b","#ff9036","#d6254d","#ff5475","#fdeba9"],["Green bedbug","#a3c68c","#879676","#6e6662","#4f364a","#340735"],["Hadda Beetle","#a32c28","#1c090b","#384030","#7b8055","#bca875"],["Chili in the moor","#80a8a8","#909d9e","#a88c8c","#ff0d51","#7a8c89"],["Insects in the wild","#6d9788","#1e2528","#7e1c13","#bf0a0d","#e6e1c2"],["Tree buds","#373737","#8db986","#acce91","#badb73","#efeae4"],["Salmon tart","#e6b39a","#e6cba5","#ede3b4","#8b9e9b","#6d7578"],["Chianti","#280904","#680e34","#9a151a","#c21b12","#fc4b2a"],["Sommelier party","#4b3e4d","#1e8c93","#dbd8a2","#c4ac30","#d74f33"],["Limo tour","#161616","#c94d65","#e7c049","#92b35a","#1f6764"],["Lime","#234d20","#36802d","#77ab59","#c9df8a","#f0f7da"],["Aubergine","#641f5e","#676077","#65ac92","#c2c092","#edd48e"],["Saturn","#e6eba9","#abbb9f","#6f8b94","#706482","#703d6f"],["Little Women","#fdcfbf","#feb89f","#e23d75","#5f0d3b","#742365"],["Sunrise","#ff7474","#f59b71","#c7c77f","#e0e0a8","#f1f1c1"],["Merlot","#4f364c","#5e405f","#6b6b6b","#8f9e6f","#b1cf72"],["Lawyer office","#230b00","#a29d7f","#d4cfa5","#f8ecd4","#aabe9b"],["Wild roses","#d4f7dc","#dbe7b4","#dbc092","#e0846d","#f51441"],["Wild lavender","#62a07b","#4f8b89","#536c8d","#5c4f79","#613860"],["Black and white","#000000","#444444","#888888","#DDDDDD","#FFFFFF"],["White and Black","#DDDDDD ","#999999","#777777","#333333","#000000"],["Jungle fever","#001514","#C2D076","#FFE1E1","#FFA0FD","#E952DE"],["Paolo Tonon","#DDDDDD","#000000","#333333","#666666","#0EEBA5"]],citiesJSON=[{ID:1,Name:"San Francisco",UTC:-8,Latitudine:37.47,Longitudine:-122.25,DST:!0,millionpop:1},{ID:2,Name:"Seattle",UTC:-8,Latitudine:47.37,Longitudine:-122.21,DST:!0,millionpop:1},{ID:3,Name:"Los Angeles",UTC:-8,Latitudine:34,Longitudine:-118,DST:!0,millionpop:4},{ID:4,Name:"Phoenix",UTC:-7,Latitudine:33.27,Longitudine:-112.04,DST:!1,millionpop:2},{ID:5,Name:"Mexico City",UTC:-6,Latitudine:19.25,Longitudine:-99.08,DST:!0,millionpop:9},{ID:6,Name:"Dallas",UTC:-6,Latitudine:32.47,Longitudine:-96.48,DST:!0,millionpop:2},{ID:7,Name:"Guatemala",UTC:-6,Latitudine:14.37,Longitudine:-90.32,DST:!1,millionpop:1},{ID:8,Name:"Belmopan",UTC:-6,Latitudine:17.15,Longitudine:-88.46,DST:!1,millionpop:0},{ID:9,Name:"San Salvador",UTC:-6,Latitudine:13.42,Longitudine:-89.12,DST:!1,millionpop:0},{ID:10,Name:"Tegucigalpa",UTC:-6,Latitudine:14.06,Longitudine:-87.12,DST:!1,millionpop:1},{ID:11,Name:"Chicago",UTC:-6,Latitudine:41.53,Longitudine:-87.38,DST:!0,millionpop:4},{ID:12,Name:"Managua",UTC:-6,Latitudine:12.09,Longitudine:-86.16,DST:!1,millionpop:1},{ID:13,Name:"San Jose",UTC:-6,Latitudine:9.56,Longitudine:-84.05,DST:!1,millionpop:.3},{ID:14,Name:"Columbus",UTC:-5,Latitudine:39.58,Longitudine:-83,DST:!0,millionpop:1},{ID:15,Name:"Havana",UTC:-5,Latitudine:23,Longitudine:-82,DST:!0,millionpop:2},{ID:16,Name:"Panama City",UTC:-5,Latitudine:9,Longitudine:-79,DST:!1,millionpop:0},{ID:17,Name:"Quito",UTC:-5,Latitudine:0,Longitudine:-78,DST:!1,millionpop:2},{ID:18,Name:"Nassau",UTC:-5,Latitudine:25,Longitudine:-77,DST:!0,millionpop:0},{ID:19,Name:"Lima",UTC:-5,Latitudine:-12,Longitudine:-77,DST:!1,millionpop:10},{ID:20,Name:"Washington",UTC:-5,Latitudine:38.54,Longitudine:-77,DST:!0,millionpop:1},{ID:21,Name:"Ottawa",UTC:-5,Latitudine:45.25,Longitudine:-76.42,DST:!0,millionpop:1},{ID:22,Name:"Kingston",UTC:-5,Latitudine:18,Longitudine:-76.47,DST:!1,millionpop:0},{ID:23,Name:"New York",UTC:-5,Latitudine:40.43,Longitudine:-74,DST:!0,millionpop:8},{ID:24,Name:"Bogota",UTC:-5,Latitudine:4.36,Longitudine:-74.05,DST:!1,millionpop:7},{ID:25,Name:"Port-au-Prince",UTC:-5,Latitudine:18.33,Longitudine:-72.2,DST:!0,millionpop:1},{ID:26,Name:"Santiago",UTC:-3,Latitudine:-33.26,Longitudine:-70.39,DST:!0,millionpop:6},{ID:27,Name:"Boston",UTC:-5,Latitudine:42.21,Longitudine:-71,DST:!0,millionpop:1},{ID:28,Name:"La Paz",UTC:-4,Latitudine:-16.3,Longitudine:-68.08,DST:!1,millionpop:1},{ID:29,Name:"Caracas",UTC:-4,Latitudine:10.3,Longitudine:-66.54,DST:!1,millionpop:2},{ID:30,Name:"Bridgetown",UTC:-4,Latitudine:13.06,Longitudine:-60,DST:!1,millionpop:0},{ID:31,Name:"Buenos Aires",UTC:-3,Latitudine:-34.37,Longitudine:-58.23,DST:!1,millionpop:3},{ID:32,Name:"Georgetown",UTC:-4,Latitudine:6.49,Longitudine:-58.1,DST:!1,millionpop:0},{ID:33,Name:"Asuncion",UTC:-3,Latitudine:-25.17,Longitudine:-57.38,DST:!0,millionpop:1},{ID:34,Name:"Montevideo",UTC:-3,Latitudine:-34.54,Longitudine:-56.11,DST:!1,millionpop:1},{ID:35,Name:"Brasilia",UTC:-3,Latitudine:-15.48,Longitudine:-47.53,DST:!1,millionpop:3},{ID:36,Name:"São Paulo",UTC:-3,Latitudine:-23.33,Longitudine:-46.48,DST:!1,millionpop:12},{ID:37,Name:"Praia",UTC:-1,Latitudine:14.55,Longitudine:-23.31,DST:!1,millionpop:0},{ID:38,Name:"Reykjavik",UTC:0,Latitudine:64,Longitudine:-21.57,DST:!1,millionpop:0},{ID:39,Name:"Dakar",UTC:0,Latitudine:14.4,Longitudine:-17.26,DST:!1,millionpop:1},{ID:40,Name:"Nouakchott",UTC:0,Latitudine:18.05,Longitudine:-15.59,DST:!1,millionpop:1},{ID:41,Name:"Freetown",UTC:0,Latitudine:8.29,Longitudine:-13.14,DST:!1,millionpop:1},{ID:42,Name:"Bamako",UTC:0,Latitudine:12,Longitudine:-8,DST:!1,millionpop:2},{ID:43,Name:"London",UTC:0,Latitudine:51.3,Longitudine:.08,DST:!0,millionpop:9},{ID:44,Name:"Accra",UTC:0,Latitudine:5.33,Longitudine:.12,DST:!1,millionpop:1},{ID:45,Name:"Lomé",UTC:0,Latitudine:6.08,Longitudine:1.13,DST:!1,millionpop:1},{ID:46,Name:"Paris",UTC:1,Latitudine:48.51,Longitudine:2.21,DST:!0,millionpop:2},{ID:47,Name:"Ouagadougou",UTC:0,Latitudine:12.22,Longitudine:1.32,DST:!1,millionpop:2},{ID:48,Name:"Porto-Novo",UTC:1,Latitudine:6.3,Longitudine:2.36,DST:!1,millionpop:0},{ID:49,Name:"Niamey",UTC:1,Latitudine:13.31,Longitudine:2.07,DST:!1,millionpop:1},{ID:50,Name:"Barcelona",UTC:1,Latitudine:41.23,Longitudine:2.11,DST:!0,millionpop:2},{ID:51,Name:"Madrid",UTC:1,Latitudine:40.25,Longitudine:-3.42,DST:!0,millionpop:3},{ID:52,Name:"Algiers",UTC:1,Latitudine:36.46,Longitudine:-3.03,DST:!1,millionpop:4},{ID:53,Name:"Brussels",UTC:1,Latitudine:50.51,Longitudine:4.21,DST:!0,millionpop:1},{ID:54,Name:"Amsterdam",UTC:1,Latitudine:52.22,Longitudine:4.54,DST:!0,millionpop:1},{ID:55,Name:"Yamoussoukro",UTC:0,Latitudine:6.49,Longitudine:-5.17,DST:!1,millionpop:0},{ID:56,Name:"Dublin",UTC:0,Latitudine:53.21,Longitudine:6.16,DST:!0,millionpop:1},{ID:57,Name:"Rabat",UTC:1,Latitudine:34.01,Longitudine:6.5,DST:!1,millionpop:1},{ID:58,Name:"Bern",UTC:1,Latitudine:46.57,Longitudine:7.27,DST:!0,millionpop:0},{ID:59,Name:"Abuja",UTC:1,Latitudine:9.04,Longitudine:7.29,DST:!1,millionpop:2},{ID:60,Name:"Milan",UTC:1,Latitudine:45.28,Longitudine:9.11,DST:!0,millionpop:1},{ID:61,Name:"Lisbon",UTC:0,Latitudine:38.44,Longitudine:-9.09,DST:!0,millionpop:1},{ID:62,Name:"Libreville",UTC:1,Latitudine:.24,Longitudine:9.27,DST:!1,millionpop:1},{ID:63,Name:"Vaduz",UTC:1,Latitudine:47.08,Longitudine:9.31,DST:!0,millionpop:0},{ID:64,Name:"Monrovia",UTC:0,Latitudine:6.19,Longitudine:-10.48,DST:!1,millionpop:1},{ID:65,Name:"Tunis",UTC:1,Latitudine:36.48,Longitudine:10.11,DST:!1,millionpop:3},{ID:66,Name:"Oslo",UTC:1,Latitudine:59.55,Longitudine:10.44,DST:!0,millionpop:1},{ID:67,Name:"Munich",UTC:1,Latitudine:48.09,Longitudine:11.33,DST:!0,millionpop:2},{ID:68,Name:"Rome",UTC:1,Latitudine:41.54,Longitudine:12.29,DST:!0,millionpop:3},{ID:69,Name:"Copenhagen",UTC:1,Latitudine:55.41,Longitudine:12.34,DST:!0,millionpop:1},{ID:70,Name:"Yaounde",UTC:1,Latitudine:3.52,Longitudine:11.31,DST:!1,millionpop:3},{ID:71,Name:"Venice",UTC:1,Latitudine:45.26,Longitudine:12.2,DST:!0,millionpop:0},{ID:72,Name:"Villorba",UTC:1,Latitudine:45.43,Longitudine:12.15,DST:!0,millionpop:0},{ID:73,Name:"Berlin",UTC:1,Latitudine:52.31,Longitudine:13.23,DST:!0,millionpop:4},{ID:74,Name:"Luanda",UTC:1,Latitudine:-8.5,Longitudine:13.14,DST:!1,millionpop:3},{ID:75,Name:"Conakry",UTC:0,Latitudine:9.312,Longitudine:-13.43,DST:!1,millionpop:2},{ID:76,Name:"Tripoli",UTC:2,Latitudine:32.54,Longitudine:13.11,DST:!1,millionpop:1},{ID:77,Name:"Lestans",UTC:1,Latitudine:46.09,Longitudine:12.53,DST:!0,millionpop:0},{ID:78,Name:"Prague",UTC:1,Latitudine:50.05,Longitudine:14.25,DST:!0,millionpop:1},{ID:79,Name:"Valletta",UTC:1,Latitudine:35.54,Longitudine:14.31,DST:!0,millionpop:0},{ID:80,Name:"Ljubljana",UTC:1,Latitudine:46.03,Longitudine:14.3,DST:!0,millionpop:0},{ID:81,Name:"N'Djamena",UTC:1,Latitudine:12.07,Longitudine:15.03,DST:!1,millionpop:1},{ID:82,Name:"Kinshasa",UTC:1,Latitudine:-4.19,Longitudine:15.19,DST:!1,millionpop:15},{ID:83,Name:"Brazzaville",UTC:1,Latitudine:-4.16,Longitudine:15.17,DST:!1,millionpop:2},{ID:84,Name:"Vienna",UTC:1,Latitudine:48.13,Longitudine:16.22,DST:!0,millionpop:2},{ID:85,Name:"Zagreb",UTC:1,Latitudine:45.49,Longitudine:15.59,DST:!0,millionpop:0},{ID:86,Name:"Bratislava",UTC:1,Latitudine:48.09,Longitudine:17.07,DST:!0,millionpop:0},{ID:87,Name:"Sarajevo",UTC:1,Latitudine:43.51,Longitudine:18.23,DST:!0,millionpop:0},{ID:88,Name:"Stockholm",UTC:1,Latitudine:59.2,Longitudine:18.04,DST:!0,millionpop:1},{ID:89,Name:"Bangui",UTC:1,Latitudine:4.22,Longitudine:18.33,DST:!1,millionpop:1},{ID:90,Name:"Budapest",UTC:1,Latitudine:47.3,Longitudine:19.03,DST:!0,millionpop:2},{ID:91,Name:"Podgorica",UTC:1,Latitudine:42.26,Longitudine:19.16,DST:!0,millionpop:0},{ID:92,Name:"Tirana",UTC:1,Latitudine:41.2,Longitudine:19.49,DST:!0,millionpop:0},{ID:93,Name:"Belgrade",UTC:1,Latitudine:44.49,Longitudine:20.27,DST:!0,millionpop:1},{ID:94,Name:"Pristina",UTC:1,Latitudine:42.4,Longitudine:21.1,DST:!0,millionpop:0},{ID:95,Name:"Skopje",UTC:1,Latitudine:42,Longitudine:21.26,DST:!0,millionpop:1},{ID:96,Name:"Warsaw",UTC:1,Latitudine:52.14,Longitudine:21,DST:!0,millionpop:2},{ID:97,Name:"Sofia",UTC:2,Latitudine:42.42,Longitudine:23.19,DST:!0,millionpop:0},{ID:98,Name:"Tallinn",UTC:2,Latitudine:59.26,Longitudine:24.45,DST:!0,millionpop:0},{ID:99,Name:"Athens",UTC:2,Latitudine:37.59,Longitudine:23.44,DST:!0,millionpop:1},{ID:100,Name:"Riga",UTC:2,Latitudine:56.57,Longitudine:24.06,DST:!0,millionpop:1},{ID:101,Name:"Helsinki",UTC:2,Latitudine:60.1,Longitudine:25.47,DST:!0,millionpop:1},{ID:102,Name:"Vilnius",UTC:2,Latitudine:54.41,Longitudine:25.17,DST:!0,millionpop:1},{ID:103,Name:"Bucharest",UTC:2,Latitudine:44.26,Longitudine:26.06,DST:!0,millionpop:2},{ID:104,Name:"Minsk",UTC:3,Latitudine:53.54,Longitudine:27.33,DST:!1,millionpop:2},{ID:105,Name:"Gaborone",UTC:2,Latitudine:-24.39,Longitudine:25.55,DST:!1,millionpop:0},{ID:106,Name:"Austin",UTC:-6,Latitudine:30.16,Longitudine:-97.45,DST:!0,millionpop:1},{ID:107,Name:"Pretoria",UTC:2,Latitudine:-25.45,Longitudine:28.11,DST:!1,millionpop:1},{ID:108,Name:"Lusaka",UTC:2,Latitudine:-15.25,Longitudine:28.17,DST:!1,millionpop:2},{ID:109,Name:"Chisinau",UTC:2,Latitudine:47,Longitudine:29,DST:!0,millionpop:1},{ID:110,Name:"Gitega",UTC:2,Latitudine:-3.26,Longitudine:29.56,DST:!1,millionpop:0},{ID:111,Name:"Kigali",UTC:2,Latitudine:1.57,Longitudine:30.04,DST:!1,millionpop:1},{ID:112,Name:"Kiev",UTC:2,Latitudine:50.26,Longitudine:30.31,DST:!0,millionpop:3},{ID:113,Name:"Cairo",UTC:2,Latitudine:30.04,Longitudine:31.14,DST:!1,millionpop:9},{ID:114,Name:"Harare",UTC:2,Latitudine:-17.5,Longitudine:31.03,DST:!1,millionpop:1},{ID:115,Name:"Maputo",UTC:2,Latitudine:-25.58,Longitudine:32.34,DST:!1,millionpop:1},{ID:116,Name:"Khartoum",UTC:2,Latitudine:15.36,Longitudine:32.32,DST:!1,millionpop:5},{ID:117,Name:"Ankara",UTC:3,Latitudine:39.55,Longitudine:32.51,DST:!1,millionpop:6},{ID:118,Name:"Kampala",UTC:3,Latitudine:.19,Longitudine:32.35,DST:!1,millionpop:2},{ID:119,Name:"Nicosia",UTC:2,Latitudine:35.15,Longitudine:33.22,DST:!0,millionpop:0},{ID:120,Name:"Mumbai",UTC:5.5,Latitudine:18.57,Longitudine:72.5,DST:!1,millionpop:12},{ID:121,Name:"Sydney",UTC:11,Latitudine:-33.52,Longitudine:151.12,DST:!0,millionpop:5},{ID:122,Name:"Lilongwe",UTC:2,Latitudine:-13.59,Longitudine:33.46,DST:!1,millionpop:1},{ID:123,Name:"Jerusalem",UTC:2,Latitudine:31.47,Longitudine:35.13,DST:!0,millionpop:1},{ID:124,Name:"Beirut",UTC:2,Latitudine:33.53,Longitudine:35.29,DST:!0,millionpop:0},{ID:125,Name:"Dodoma",UTC:3,Latitudine:-6.1,Longitudine:35.45,DST:!1,millionpop:2},{ID:126,Name:"Amman",UTC:3,Latitudine:31.57,Longitudine:35.55,DST:!0,millionpop:4},{ID:127,Name:"Nairobi",UTC:3,Latitudine:-1.17,Longitudine:36.49,DST:!1,millionpop:4},{ID:128,Name:"Damascus",UTC:2,Latitudine:33.31,Longitudine:36.19,DST:!0,millionpop:2},{ID:129,Name:"Moscow",UTC:3,Latitudine:55.45,Longitudine:37.37,DST:!1,millionpop:12},{ID:130,Name:"Addis Ababa",UTC:3,Latitudine:9.01,Longitudine:38.45,DST:!1,millionpop:3},{ID:131,Name:"Asmara",UTC:3,Latitudine:15.2,Longitudine:38.56,DST:!1,millionpop:1},{ID:132,Name:"Moroni",UTC:3,Latitudine:-11.42,Longitudine:43.16,DST:!1,millionpop:0},{ID:133,Name:"Djibouti",UTC:3,Latitudine:11.35,Longitudine:43.09,DST:!1,millionpop:1},{ID:134,Name:"Yerevan",UTC:4,Latitudine:40.11,Longitudine:44.31,DST:!1,millionpop:1},{ID:135,Name:"Baghdad",UTC:3,Latitudine:33.19,Longitudine:44.25,DST:!1,millionpop:8},{ID:136,Name:"Sana",UTC:3,Latitudine:15.21,Longitudine:44.13,DST:!1,millionpop:4},{ID:137,Name:"Tbilisi",UTC:4,Latitudine:41.42,Longitudine:44.48,DST:!1,millionpop:1},{ID:138,Name:"Mogadishu",UTC:3,Latitudine:2.02,Longitudine:45.2,DST:!1,millionpop:3},{ID:139,Name:"Riyadh",UTC:3,Latitudine:24.34,Longitudine:46.43,DST:!1,millionpop:5},{ID:140,Name:"Antananarivo",UTC:3,Latitudine:-18.55,Longitudine:47.32,DST:!1,millionpop:3},{ID:141,Name:"Kuwait",UTC:3,Latitudine:29.23,Longitudine:47.58,DST:!1,millionpop:4},{ID:142,Name:"Baku",UTC:4,Latitudine:40.23,Longitudine:49.5,DST:!1,millionpop:2},{ID:143,Name:"Manama",UTC:3,Latitudine:26.13,Longitudine:50.35,DST:!1,millionpop:0},{ID:144,Name:"Tehran",UTC:3.5,Latitudine:35.42,Longitudine:51.25,DST:!0,millionpop:9},{ID:145,Name:"Doha",UTC:3,Latitudine:25.17,Longitudine:51.32,DST:!1,millionpop:1},{ID:146,Name:"Abu Dhabi",UTC:4,Latitudine:24.28,Longitudine:54.22,DST:!1,millionpop:2},{ID:147,Name:"Muscat",UTC:4,Latitudine:23.36,Longitudine:58.33,DST:!1,millionpop:1},{ID:148,Name:"Ashgabat",UTC:5,Latitudine:37.56,Longitudine:58.23,DST:!1,millionpop:1},{ID:149,Name:"Dushanbe",UTC:5,Latitudine:38.35,Longitudine:68.47,DST:!1,millionpop:1},{ID:150,Name:"Tashkent",UTC:5,Latitudine:41.19,Longitudine:69.17,DST:!1,millionpop:2},{ID:151,Name:"Kabul",UTC:4.5,Latitudine:34.32,Longitudine:69.1,DST:!1,millionpop:4},{ID:152,Name:"Nur-Sultan",UTC:6,Latitudine:51.11,Longitudine:71.27,DST:!1,millionpop:1},{ID:153,Name:"Islamabad",UTC:5,Latitudine:33.43,Longitudine:73.04,DST:!1,millionpop:1},{ID:154,Name:"Bishkek",UTC:6,Latitudine:42.52,Longitudine:74.35,DST:!1,millionpop:1},{ID:155,Name:"Delhi",UTC:5.5,Latitudine:28.37,Longitudine:77.13,DST:!1,millionpop:19},{ID:156,Name:"Kathmandu",UTC:5.45,Latitudine:27.43,Longitudine:85.19,DST:!1,millionpop:1},{ID:157,Name:"Dhaka",UTC:6,Latitudine:23.43,Longitudine:90.25,DST:!1,millionpop:9},{ID:158,Name:"Thimphu",UTC:6,Latitudine:27.28,Longitudine:89.39,DST:!1,millionpop:0},{ID:159,Name:"Naypyidaw",UTC:6.5,Latitudine:19.45,Longitudine:96.06,DST:!1,millionpop:1},{ID:160,Name:"Bangkok",UTC:7,Latitudine:13.44,Longitudine:100.3,DST:!1,millionpop:8},{ID:161,Name:"Kuala Lumpur",UTC:8,Latitudine:3.09,Longitudine:101.42,DST:!1,millionpop:8},{ID:162,Name:"Vientiane",UTC:7,Latitudine:17.58,Longitudine:102.36,DST:!1,millionpop:1},{ID:163,Name:"Phnom Penh",UTC:7,Latitudine:11.34,Longitudine:104.55,DST:!1,millionpop:2},{ID:164,Name:"Hanoi",UTC:7,Latitudine:21.02,Longitudine:105.51,DST:!1,millionpop:8},{ID:165,Name:"Jakarta",UTC:7,Latitudine:-6.09,Longitudine:106.49,DST:!1,millionpop:10},{ID:166,Name:"Ulaanbaatar",UTC:8,Latitudine:47.55,Longitudine:106.55,DST:!1,millionpop:1},{ID:167,Name:"Beijing",UTC:8,Latitudine:39.55,Longitudine:116.23,DST:!1,millionpop:21},{ID:168,Name:"Manila",UTC:8,Latitudine:14.35,Longitudine:120.59,DST:!1,millionpop:2},{ID:169,Name:"Taipei",UTC:8,Latitudine:25.04,Longitudine:121.31,DST:!1,millionpop:3},{ID:170,Name:"Pyongyang",UTC:9,Latitudine:39.02,Longitudine:125.46,DST:!1,millionpop:3},{ID:171,Name:"Seoul",UTC:9,Latitudine:37.34,Longitudine:126.59,DST:!1,millionpop:10},{ID:172,Name:"Canberra",UTC:11,Latitudine:-35.17,Longitudine:149.08,DST:!1,millionpop:0},{ID:173,Name:"Tokyo",UTC:9,Latitudine:35.41,Longitudine:139.42,DST:!1,millionpop:9},{ID:174,Name:"Port Moresby",UTC:10,Latitudine:-9.27,Longitudine:147.11,DST:!1,millionpop:0},{ID:175,Name:"Marfa",UTC:-6,Latitudine:30.18,Longitudine:-104.1,DST:!0,millionpop:0},{ID:176,Name:"Houston",UTC:-6,Latitudine:29.45,Longitudine:-95.22,DST:!0,millionpop:2},{ID:177,Name:"Tempe",UTC:-7,Latitudine:33.25,Longitudine:-111.55,DST:!1,millionpop:0},{ID:178,Name:"Bassano",UTC:1,Latitudine:45.46,Longitudine:11.44,DST:!0,millionpop:0},{ID:179,Name:"Melbourne",UTC:11,Latitudine:-37.49,Longitudine:144.58,DST:!0,millionpop:5},{ID:180,Name:"Brisbane",UTC:10,Latitudine:-27.28,Longitudine:153.02,DST:!1,millionpop:2},{ID:181,Name:"Shanghai",UTC:8,Latitudine:31.14,Longitudine:121.19,DST:!1,millionpop:24},{ID:182,Name:"Osaka",UTC:5,Latitudine:34.41,Longitudine:135.31,DST:!1,millionpop:2},{ID:183,Name:"Suzhou",UTC:8,Latitudine:31.19,Longitudine:120.37,DST:!1,millionpop:10},{ID:184,Name:"Guangzhou",UTC:8,Latitudine:23.08,Longitudine:113.16,DST:!1,millionpop:12},{ID:185,Name:"Philadelphia",UTC:-5,Latitudine:39.57,Longitudine:-75.1,DST:!0,millionpop:2},{ID:186,Name:"San Antonio",UTC:-6,Latitudine:29.25,Longitudine:-98.3,DST:!0,millionpop:1},{ID:187,Name:"San Diego",UTC:-8,Latitudine:32.43,Longitudine:-117.1,DST:!0,millionpop:1},{ID:188,Name:"Jacksonville",UTC:-5,Latitudine:30.2,Longitudine:-81.39,DST:!0,millionpop:1},{ID:189,Name:"Indianapolis",UTC:-5,Latitudine:39.46,Longitudine:-86.09,DST:!0,millionpop:1},{ID:190,Name:"Charlotte",UTC:-5,Latitudine:35.14,Longitudine:-80.51,DST:!0,millionpop:1},{ID:191,Name:"Denver",UTC:-7,Latitudine:39.45,Longitudine:-104.59,DST:!0,millionpop:1},{ID:192,Name:"Nashville",UTC:-6,Latitudine:36.1,Longitudine:-86.46,DST:!0,millionpop:1},{ID:193,Name:"Portland",UTC:-8,Latitudine:45.31,Longitudine:-122.42,DST:!0,millionpop:1},{ID:194,Name:"Detroit",UTC:-5,Latitudine:42.2,Longitudine:-83.03,DST:!0,millionpop:1},{ID:195,Name:"Louisville",UTC:-5,Latitudine:38.15,Longitudine:-85.46,DST:!0,millionpop:1},{ID:196,Name:"Baltimore",UTC:-5,Latitudine:39.17,Longitudine:-76.37,DST:!0,millionpop:1},{ID:197,Name:"Milwaukee",UTC:-6,Latitudine:43.02,Longitudine:-87.55,DST:!0,millionpop:1},{ID:198,Name:"Albuquerque",UTC:-7,Latitudine:35.05,Longitudine:-106.39,DST:!0,millionpop:1},{ID:199,Name:"Toronto",UTC:-5,Latitudine:43.39,Longitudine:-79.23,DST:!0,millionpop:2},{ID:200,Name:"Vancouver",UTC:-8,Latitudine:49.17,Longitudine:-123.07,DST:!0,millionpop:1},{ID:201,Name:"Perth",UTC:8,Latitudine:-31.57,Longitudine:115.51,DST:!0,millionpop:2},{ID:202,Name:"Kansas City",UTC:-6,Latitudine:39.06,Longitudine:-94.35,DST:!0,millionpop:0},{ID:203,Name:"Tucson",UTC:-7,Latitudine:32.13,Longitudine:-110.56,DST:!0,millionpop:0},{ID:204,Name:"Edmonton",UTC:-6,Latitudine:53.33,Longitudine:-113.3,DST:!0,millionpop:1}],hash=tokenData.hash;class Random{constructor(e){this.seed=e}random_dec(){return this.seed^=this.seed<<13,this.seed^=this.seed>>17,this.seed^=this.seed<<5,(this.seed<0?1+~this.seed:this.seed)%1e3/1e3}random_num(e,i){return e+(i-e)*this.random_dec()}random_int(e,i){return Math.floor(this.random_num(e,i+1))}}seed=parseInt(tokenData.hash.slice(0,16),16);let R=new Random(seed);const comune=4.5,raro=7,epico=9,leggendario=10;let col1,col2,col3,col4,col5,col1dark,col2dark,col3dark,col4dark,col5dark,paletteIndex,contaColore=2,definizioneColore=[],colSfondoSecondi,feaPalette,feaCase,feaDay,feaBGSquareSmall,feaBGSquareBig,feaBGSquareRounded,feaBGCircle,feaBGCircleBig,feaBGsecondHand,feaBGsecondBall,feaBGcentralBall,feaWrittenCircles,filteredCounter,firstCity;const CELLS=Math.floor(R.random_num(5,20));let currentCellsPerRow;const START_LATITUDE_FILTER=Math.floor(R.random_num(5,15)),START_LONGITUDE_FILTER=Math.floor(R.random_num(16,30)),MIN_CITIES=Math.floor(R.random_num(5,15)),MAX_CITIES=Math.floor(R.random_num(30,60)),RANGE_VARIATION=Math.floor(R.random_num(2,6)),MAX_LATITUDE=90,MAX_LONGITUDE=180;let minLat,maxLat,minLong,maxLong,isCityEnabled=!0,isWatchEnabled=!0,isBgEnabled=!0;var larghezza=window.innerWidth,altezza=window.innerHeight;let squareDimensions=Math.min(larghezza,altezza),screenW=squareDimensions,screenH=squareDimensions,transbgw=larghezza/2-screenW/2,transbgh=altezza/2-screenH/2,squareZones=[],squareZonesMinSec=[],squareW,squareH;currentCellsPerRow=CELLS,squareW=screenW/currentCellsPerRow,squareH=screenH/currentCellsPerRow;let rareIndex=R.random_num(0,10),sogliaComune=paletteJSON.length/4,sogliaRaro=paletteJSON.length/4*2,sogliaEpico=paletteJSON.length/4*3,sogliaLeggendario=paletteJSON.length;rareIndex<comune?paletteIndex=Math.floor(R.random_num(0,sogliaComune)):rareIndex<raro?paletteIndex=Math.floor(R.random_num(sogliaComune,sogliaRaro)):rareIndex<epico?paletteIndex=Math.floor(R.random_num(sogliaRaro,sogliaEpico)):rareIndex<leggendario&&(paletteIndex=Math.floor(R.random_num(sogliaEpico,sogliaLeggendario))),feaPalette=paletteJSON[paletteIndex][0];let rareType=R.random_num(0,11);rareType>0&&rareType<comune?feaCase="square":rareType>comune&&rareType<raro?feaCase="drop":rareType>raro&&rareType<epico?feaCase="round":rareType>epico&&rareType<leggendario?feaCase="diamond":rareType>leggendario&&(feaCase="all");let rareDayDate=R.random_num(0,10);feaDay=rareDayDate>raro;let rareBGSquareSmall=R.random_num(0,10);feaBGSquareSmall=rareBGSquareSmall>comune;let rareBGSquareBig=R.random_num(0,10);feaBGSquareBig=rareBGSquareBig>epico;let rareBGSquareRounded=R.random_num(0,10);feaBGSquareRounded=rareBGSquareRounded>raro;let rareBGCircle=R.random_num(0,10);feaBGCircle=rareBGCircle>comune;let rareBGCircleBig=R.random_num(0,10);feaBGCircleBig=rareBGCircleBig>epico;let rareBGsecondHand=R.random_num(0,10);feaBGsecondHand=rareBGsecondHand>comune;let rareBGsecondBall=R.random_num(0,10);feaBGsecondBall=rareBGsecondBall>comune;let rareBGcentralBall=R.random_num(0,10);feaBGcentralBall=rareBGcentralBall>epico,feaBGSquareSmall||feaBGSquareBig||feaBGSquareRounded||feaBGCircle||feaBGCircleBig||feaBGsecondHand||feaBGsecondBall||feaBGcentralBall||(feaBGSquareSmall=!0);let rareWrittenCircles=R.random_num(0,10);function filterCities(e,i,a){if(!e||!i||!a)return;currentLatitudeFilter=i,currentLongitudeFilter=a;const n=citiesJSON.filter(n=>Math.abs(n.Latitudine-e.Latitudine)<i&&Math.abs(n.Longitudine-e.Longitudine)<a);return firstCity=n[0].Name,(filteredCounter=n.length)<=MAX_CITIES&&filteredCounter>=MIN_CITIES||Math.abs(i)>MAX_LATITUDE||Math.abs(a)>MAX_LONGITUDE?n:filteredCounter<MIN_CITIES?filterCities(e,i+RANGE_VARIATION,a+RANGE_VARIATION):filteredCounter>MAX_CITIES?filterCities(e,i-RANGE_VARIATION,a-RANGE_VARIATION):void 0}rareWrittenCircles>epico?(feaWrittenCircles=!0,feaCase="None",feaDay=!1,feaBGSquareSmall=!1,feaBGSquareBig=!1,feaBGSquareRounded=!1,feaBGCircle=!1,feaBGCircleBig=!1,feaBGsecondHand=!1,feaBGsecondBall=!1,feaBGcentralBall=!1):feaWrittenCircles=!1;const randomCityIndex=Math.floor(R.random_dec()*citiesJSON.length),randomCity=citiesJSON[randomCityIndex];function calculateFeatures(e){return{features:{"First city":firstCity,Cells:CELLS,"City number":filteredCounter.toString(),Palette:feaPalette.toString(),"Watch Case":feaCase.toString(),"Day date":feaDay.toString(),"BG small square":feaBGSquareSmall.toString(),"BG big square":feaBGSquareBig.toString(),"BG rounded square":feaBGSquareRounded.toString(),"BG circle":feaBGCircle.toString(),"BG big circle":feaBGCircleBig.toString(),"BG second hand":feaBGsecondHand.toString(),"BG second ball":feaBGsecondBall.toString(),"BG central ball":feaBGcentralBall.toString(),"Written Circles":feaWrittenCircles.toString()}}}function setup(){createCanvas(windowWidth,windowHeight),colorMode(RGB,255),textFont("Garamond",40),col1=color(paletteJSON[paletteIndex][1]),col2=color(paletteJSON[paletteIndex][2]),col3=color(paletteJSON[paletteIndex][3]),col4=color(paletteJSON[paletteIndex][4]),col5=color(paletteJSON[paletteIndex][5]);let redValueCol1=red(col1),greenValueCol1=green(col1),blueValueCol1=blue(col1),redValueCol2=red(col2),greenValueCol2=green(col2),blueValueCol2=blue(col2),redValueCol3=red(col3),greenValueCol3=green(col3),blueValueCol3=blue(col3),redValueCol4=red(col4),greenValueCol4=green(col4),blueValueCol4=blue(col4),redValueCol5=red(col5),greenValueCol5=green(col5),blueValueCol5=blue(col5);colSfondoSecondi=color(redValueCol1+30,greenValueCol1+30,blueValueCol1+30),col1dark=color(redValueCol1-80,greenValueCol1-80,blueValueCol1-80),col2dark=color(redValueCol2-80,greenValueCol2-80,blueValueCol2-80),col3dark=color(redValueCol3-80,greenValueCol3-80,blueValueCol3-80),col4dark=color(redValueCol4-80,greenValueCol4-80,blueValueCol4-80),col5dark=color(redValueCol5-80,greenValueCol5-80,blueValueCol5-80),col1orange=color(255,greenValueCol1+50,blueValueCol1-30),col2orange=color(255,greenValueCol2+50,blueValueCol2-30),col3orange=color(255,greenValueCol3+50,blueValueCol3-30),col4orange=color(255,greenValueCol4+50,blueValueCol4-30),col5orange=color(255,greenValueCol5+50,blueValueCol5-30);let dstVarition=0;isdst&&(dstVarition=1);for(let e=0;e<citiesJSON.length;e++){var city=citiesJSON[e];let i=0,a=citiesJSON[e].DST;isdst&&a&&(i=1);var times=SunCalc.getTimes(getCurrentDate().solarNow(),city.Latitudine,city.Longitudine),sunrise=new Date(times.sunrise).addHours(city.UTC+i).addMinutes(times.sunrise.getTimezoneOffset()),sunriseEnd=new Date(times.sunriseEnd).addHours(city.UTC+i).addMinutes(times.sunriseEnd.getTimezoneOffset()),sunsetStart=new Date(times.sunsetStart).addHours(city.UTC+i).addMinutes(times.sunsetStart.getTimezoneOffset()),sunset=new Date(times.sunset).addHours(city.UTC+i).addMinutes(times.sunset.getTimezoneOffset()),now=getCurrentDate();citiesJSON[e].sunriseCol=sunrise,citiesJSON[e].sunriseEndCol=sunriseEnd,citiesJSON[e].sunsetStartCol=sunsetStart,citiesJSON[e].sunsetCol=sunset,minLong=minLong<city.Longitudine?minLong:city.Longitudine,maxLong=maxLong>city.Longitudine?maxLong:city.Longitudine,minLat=minLat<city.Latitudine?minLat:city.Latitudine,maxLat=maxLat>city.Latitudine?maxLat:city.Latitudine}let xRatio=Math.abs(maxLong-minLong+.1)/currentCellsPerRow,yRatio=Math.abs(maxLat-minLat+.1)/currentCellsPerRow;for(let e=0;e<currentCellsPerRow;e++){squareZones[e]=[],squareZonesMinSec[e]=[];for(let i=0;i<currentCellsPerRow;i++)squareZones[e][i]=[],squareZonesMinSec[e][i]=[]}for(let r=0;r<citiesJSON.length;r++){const city=citiesJSON[r];if(city.cellX=Math.floor(Math.abs(city.Longitudine-minLong)/xRatio),city.cellY=currentCellsPerRow-Math.floor(Math.abs(city.Latitudine-minLat)/yRatio)-1,city.cellY===currentCellsPerRow&&(city.cellY-=1),city.cellY===currentCellsPerRow&&(city.cellY-=1),"all"==feaCase){let e=R.random_num(0,10);watchType=e>0&&e<comune?"square":e>comune&&e<raro?"drop":e>raro&&e<epico?"round":"diamond"}else watchType=feaCase;let randomColorCitta=int(R.random_num(2,6)),colorCitta=eval("col"+randomColorCitta),colorCittaDark=eval("col"+randomColorCitta+"dark"),colorCittaOrange=eval("col"+randomColorCitta+"orange"),multiplier;multiplier=citiesJSON[r].millionpop<=1?1:citiesJSON[r].millionpop>=1&&citiesJSON[r].millionpop<=4?2:citiesJSON[r].millionpop>=1&&citiesJSON[r].millionpop<=7?3:4;let pendoli=[];for(let e=0;e<multiplier;e++){let e=int(R.random_num(1,6));pendoli.push(e)}let id=city.ID,name=city.Name,utc=city.UTC,y=city.cellY,x=city.cellX,dst=city.DST,millionpop=city.millionpop,sunriseTime=city.sunriseCol,sunriseEndTime=city.sunriseEndCol,sunsetStartTime=city.sunsetStartCol,sunsetTime=city.sunsetCol,ran;squareZonesMinSec[x][y].push(new ModuleMinSec(id,name,utc,dst,millionpop,r,x*squareW,y*squareH,x,y,squareW,squareH,sunriseTime,sunriseEndTime,sunsetStartTime,sunsetTime,watchType,colorCitta,colorCittaDark,colorCittaOrange,pendoli)),squareZones[x][y].push(new Module(id,name,utc,dst,millionpop,r,x*squareW,y*squareH,x,y,squareW,squareH,sunriseTime,sunriseEndTime,sunsetStartTime,sunsetTime,watchType,colorCitta,colorCittaDark,colorCittaOrange)),squareZonesMinSec=squareZonesMinSec.map(e=>e.map(e=>e.length>1?[e[ran=Math.floor(R.random_dec()*e.length)]]:e)),squareZones=squareZones.map(e=>e.map(e=>e.length>1?[e[ran]]:e))}for(let e=0;e<screenW;e=squareW+e)for(let e=0;e<screenH;e=squareH+e)contaColore<=4?contaColore++:contaColore=2,definizioneColore.push(paletteJSON[paletteIndex][contaColore]);resizeCanvas(larghezza,altezza)}function draw(){if(push(),translate(transbgw,transbgh),background(col1),!feaWrittenCircles&&isBgEnabled){let e=0;for(let i=0;i<screenW;i=squareW+i)for(let a=0;a<screenH;a=squareH+a){new backgroundModule(i,a,squareW,squareH,colSfondoSecondi).draw(),e++}}if(isWatchEnabled){for(let e=0;e<currentCellsPerRow;e++)for(let i=0;i<currentCellsPerRow;i++)if(squareZonesMinSec[e][i].length>0){let a=int(random(squareZonesMinSec[e][i].length));squareZonesMinSec[e][i][a]&&squareZonesMinSec[e][i][a].draw("normal")}for(let e=0;e<currentCellsPerRow;e++)for(let i=0;i<currentCellsPerRow;i++)if(squareZones[e][i].length>0){let a=int(random(squareZones[e][i].length));squareZones[e][i][a]&&squareZones[e][i][a].draw("normal")}}pop()}citiesJSON=filterCities(randomCity,START_LATITUDE_FILTER,START_LONGITUDE_FILTER),Date.prototype.addHours=function(e){return this.setTime(this.getTime()+60*e*60*1e3),this},Date.prototype.addMinutes=function(e){return this.setTime(this.getTime()+60*e*1e3),this};let isMockEnabled=!1,inp,mockDate;function keyPressed(){"m"===key.toLowerCase()&&((isMockEnabled=!isMockEnabled)?((inp=createInput(new Date,"datetime-local")).position(0,0),inp.size(250),inp.input(changeMockDate)):(inp=void 0,mockDate=void 0)),"c"===key.toLowerCase()&&(isCityEnabled=!isCityEnabled),"w"===key.toLowerCase()&&(isWatchEnabled=!isWatchEnabled),"b"===key.toLowerCase()&&(isBgEnabled=!isBgEnabled)}function changeMockDate(){mockDate=inp.value()}function getCurrentDate(){return isMockEnabled?new Date(mockDate):new Date}class backgroundModule{constructor(e,i,a,n,t){this.x=e,this.y=i,this.squareW=a,this.squareH=n,this.dC=t}draw(){var e=new Date;let i=this.x+this.squareW/2,a=this.y+this.squareH/2,n=this.squareH,t=(this.squareH,this.squareH,e.getMilliseconds()/1e3),o=map(e.getSeconds()+t,0,60,0,TWO_PI)-HALF_PI-HALF_PI/2;map(e.getMinutes()+norm(e.getSeconds(),0,60),0,60,0,TWO_PI),HALF_PI,map(e.getHours()+norm(e.getMinutes(),0,60),0,24,0,2*TWO_PI),HALF_PI;strokeWeight(squareW/100),push(),noFill(),ellipseMode(CENTER),translate(i,a),rotate(o);let l=color(this.dC);stroke(l),feaBGCircle&&ellipse(0+n,0+n,n,n),feaBGCircleBig&&ellipse(0+n,0+n,2*n,2*n),feaBGSquareRounded&&square(0,0,n,n/4),feaBGSquareSmall&&square(0,0,2*n),feaBGSquareBig&&square(0,0,4*n),feaBGsecondHand&&line(0,0,n,n),feaBGsecondBall&&(fill(l),ellipse(n,n,n/20)),feaBGcentralBall&&(fill(l),ellipse(0,0,n/10)),pop()}}class ModuleMinSec{constructor(e,i,a,n,t,o,l,d,r,u,s,c,m,f,p,T,g,D,L,C,b){this.id=e,this.name=i,this.utc=a,this.dst=n,this.millionpop=t,this.i=o,this.xOff=l,this.yOff=d,this.x=r,this.y=u,this.squareW=s,this.squareH=c,this.sunriseTime=m,this.sunriseEndTime=f,this.sunsetStartTime=p,this.sunsetTime=T,this.watchType=g,this.colorCitta=D,this.colorCittaDark=L,this.colorCittaOrange=C,this.pendoli=b}draw(e){var i=getCurrentDate().solarNow();i.addHours(this.utc),this.dst&&isdst&&i.addHours(1);let a=1;a=this.millionpop<=1?1:this.millionpop>=1&&this.millionpop<=4?2:this.millionpop>=1&&this.millionpop<=7?3:4;let n,t,o,l=this.xOff+this.squareW/2,d=this.yOff+this.squareH/2,r=this.squareH/10,u=i.getMilliseconds()/1e3,s=map(i.getSeconds()+u,0,60,0,TWO_PI)-HALF_PI,c=map(i.getMinutes()+norm(i.getSeconds(),0,60),0,60,0,TWO_PI)-HALF_PI,m=map(i.getHours()+norm(i.getMinutes(),0,60),0,24,0,2*TWO_PI)-HALF_PI;if(o=i.getTime()>this.sunriseTime.getTime()&&i.getTime()<this.sunriseEndTime.getTime()?this.colorCittaOrange:i.getTime()>this.sunsetStartTime.getTime()&&i.getTime()<this.sunsetTime.getTime()?this.colorCittaOrange:i.getTime()>this.sunriseTime.getTime()&&i.getTime()<this.sunsetTime.getTime()?this.colorCitta:this.colorCittaDark,feaWrittenCircles){n=this.squareH*a,t=this.squareH/2;for(let e=c;e<360+m;e++){let i=360-e,a=radians(e)+c,t=l+cos(a)*n,r=d+sin(a)*n;o.setAlpha(i),stroke(o),line(l,d,t,r)}col3.setAlpha(255)}else{push(),strokeWeight(squareW/60),fill(o),stroke(o),ellipseMode(CENTER),rectMode(CENTER),translate(l,d),push(),rotate(s-HALF_PI/2),"square"==this.watchType?(noFill(),square(0,0,18.5*r),fill(o),square(7.5*r,7.5*r,r)):"drop"==this.watchType?(noFill(),beginShape(),vertex(9*r,9*r),vertex(0,9*r),bezierVertex(0,9*r,-9*r,9*r,-9*r,0),bezierVertex(-9*r,0,-9*r,0,-9*r,0),bezierVertex(-9*r,0,-9*r,-9*r,0,-9*r),bezierVertex(0,-9*r,9*r,-9*r,9*r,0),vertex(9*r,9*r),endShape(),fill(o),square(7.5*r,7.5*r,r)):"round"==this.watchType?(noFill(),stroke(o),circle(0,0,17*r),fill(o),circle(6*r,6*r,1*r)):"diamond"==this.watchType&&(noFill(),beginShape(),vertex(-4*r,9*r),vertex(9*r,9*r),vertex(9*r,-4*r),vertex(4*r,-9*r),vertex(-4*r,-9*r),vertex(-9*r,-4*r),vertex(-9*r,4*r),endShape(CLOSE),fill(o),square(7.5*r,7.5*r,r)),noFill();for(let e=0;e<=this.pendoli.length;e++)push(),translate(9*r*e,9*r*e),1==this.pendoli[e]?(push(),rotate(HALF_PI/2),noFill(),rect(18*r,0,18*r,3*r,2*r),pop()):2==this.pendoli[e]?(line(0*r,0*r,18*r,18*r),line(18*r,0*r,18*r,18*r),line(0*r,18*r,18*r,18*r)):2==this.pendoli[e]?(triangle(4.5*r,13.5*r,13.5*r,13.5*r,13.5*r,4.5*r),triangle(13.5*r,18*r,18*r,18*r,18*r,13.5*r)):3==this.pendoli[e]?(square(9*r,9*r,2*r),square(12*r,12*r,3*r),square(16*r,16*r,4*r)):4==this.pendoli[e]?(circle(9*r,9*r,2*r),circle(12*r,12*r,4*r),circle(17*r,17*r,6*r)):5==this.pendoli[e]&&(line(0*r,0*r,18*r,18*r),line(18*r,9*r,9*r,18*r)),pop();pop(),push(),rotate(c-HALF_PI/2),"square"==this.watchType?(noFill(),square(0,0,13*r),fill(o),square(5.4*r,5.4*r,r)):"drop"==this.watchType?(noFill(),beginShape(),vertex(6.5*r,6.5*r),vertex(0,6.5*r),bezierVertex(0,6.5*r,-6.5*r,6.5*r,-6.5*r,0),bezierVertex(-6.5*r,0,-6.5*r,0,-6.5*r,0),bezierVertex(-6.5*r,0,-6.5*r,-6.5*r,0,-6.5*r),bezierVertex(0,-6.5*r,6.5*r,-6.5*r,6.5*r,0),vertex(6.5*r,6.5*r),endShape(),fill(o),square(5.4*r,5.4*r,r)):"round"==this.watchType?(noFill(),circle(0,0,12*r),fill(o),circle(4.2*r,4.2*r,1*r)):"diamond"==this.watchType&&(noFill(),beginShape(),vertex(-3*r,6.5*r),vertex(6.5*r,6.5*r),vertex(6.5*r,-3*r),vertex(3*r,-6.5*r),vertex(-3*r,-6.5*r),vertex(-6.5*r,-3*r),vertex(-6.5*r,3*r),endShape(CLOSE),fill(o),square(5.4*r,5.4*r,r)),pop(),pop()}}}class Module{constructor(e,i,a,n,t,o,l,d,r,u,s,c,m,f,p,T,g,D,L,C){this.id=e,this.name=i,this.utc=a,this.dst=n,this.millionpop=t,this.i=o,this.xOff=l,this.yOff=d,this.x=r,this.y=u,this.squareW=s,this.squareH=c,this.sunriseTime=m,this.sunriseEndTime=f,this.sunsetStartTime=p,this.sunsetTime=T,this.watchType=g,this.colorCitta=D,this.colorCittaDark=L,this.colorCittaOrange=C}draw(e){var i=getCurrentDate().solarNow();i.addHours(this.utc),this.dst&&isdst&&i.addHours(1);let a=1;a=this.millionpop<=1?1:this.millionpop>=1&&this.millionpop<=4?2:this.millionpop>=1&&this.millionpop<=7?3:4;let n,t,o=this.xOff+this.squareW/2,l=this.yOff+this.squareH/2,d=this.squareH/10,r=(i.getMilliseconds(),map(i.getHours()+norm(i.getMinutes(),0,60),0,24,0,2*TWO_PI)-HALF_PI);if(t=i.getTime()>this.sunriseTime.getTime()&&i.getTime()<this.sunriseEndTime.getTime()?this.colorCittaOrange:i.getTime()>this.sunsetStartTime.getTime()&&i.getTime()<this.sunsetTime.getTime()?this.colorCittaOrange:i.getTime()>this.sunriseTime.getTime()&&i.getTime()<this.sunsetTime.getTime()?this.colorCitta:this.colorCittaDark,feaWrittenCircles){n=this.squareH/2;for(let e=r;e<360+r;e++){let i=360-e,a=radians(e)+r,d=o+cos(a)*n,u=l+sin(a)*n;t.setAlpha(i),stroke(t),line(o,l,d,u)}}else push(),noStroke(),fill(t),ellipseMode(CENTER),rectMode(CENTER),translate(o,l),rotate(r-HALF_PI/2),"square"==this.watchType?(square(0,0,9*d),fill(col1),square(3.5*d,3.5*d,d)):"drop"==this.watchType?(circle(0,0,9*d),square(2.5*d,2.5*d,4*d),fill(col1),square(3.5*d,3.5*d,d),noFill()):"round"==this.watchType?(circle(0,0,7.7*d),circle(2.5*d,2.5*d,2*d),fill(col1),circle(2.5*d,2.5*d,1*d)):"diamond"==this.watchType&&(beginShape(),vertex(-2*d,4*d),vertex(4*d,4*d),vertex(4*d,-2*d),vertex(2*d,-4*d),vertex(-2*d,-4*d),vertex(-4*d,-2*d),vertex(-4*d,2*d),endShape(CLOSE),fill(col1),square(3*d,3*d,d)),pop(),feaDay&&(textFont("Garamond",d),noStroke(),fill(col1),circle(o,l+1.4*d,1.5*d),fill(t),textAlign(CENTER),text(i.getDate(),o,l+1.7*d));fill(col1),textAlign(CENTER),textSize(this.squareW/7),isCityEnabled&&text(this.name,o,l)}}Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1),i=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),i.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()},Date.prototype.solarNow=function(){const e=getCurrentDate();return e.addMinutes(e.getTimezoneOffset()),e};var d=getCurrentDate(),n=d.getTimezoneOffset(),isdst=d.dst(),PI=Math.PI,sin=Math.sin,cos=Math.cos,tan=Math.tan,asin=Math.asin,atan=Math.atan2,acos=Math.acos,rad=PI/180,dayMs=864e5,J1970=2440588,J2000=2451545;function toJulian(e){return e.valueOf()/dayMs-.5+J1970}function fromJulian(e){return new Date((e+.5-J1970)*dayMs)}function toDays(e){return toJulian(e)-J2000}var e=23.4397*rad;function rightAscension(i,a){return atan(sin(i)*cos(e)-tan(a)*sin(e),cos(i))}function declination(i,a){return asin(sin(a)*cos(e)+cos(a)*sin(e)*sin(i))}function azimuth(e,i,a){return atan(sin(e),cos(e)*sin(i)-tan(a)*cos(i))}function altitude(e,i,a){return asin(sin(i)*sin(a)+cos(i)*cos(a)*cos(e))}function siderealTime(e,i){return rad*(280.16+360.9856235*e)-i}function astroRefraction(e){return e<0&&(e=0),2967e-7/Math.tan(e+.00312536/(e+.08901179))}function solarMeanAnomaly(e){return rad*(357.5291+.98560028*e)}function eclipticLongitude(e){return e+rad*(1.9148*sin(e)+.02*sin(2*e)+3e-4*sin(3*e))+102.9372*rad+PI}function sunCoords(e){var i=eclipticLongitude(solarMeanAnomaly(e));return{dec:declination(i,0),ra:rightAscension(i,0)}}var SunCalc={getPosition:function(e,i,a){var n=rad*-a,t=rad*i,o=toDays(e),l=sunCoords(o),d=siderealTime(o,n)-l.ra;return{azimuth:azimuth(d,t,l.dec),altitude:altitude(d,t,l.dec)}}},times=SunCalc.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];SunCalc.addTime=function(e,i,a){times.push([e,i,a])};var J0=9e-4;function julianCycle(e,i){return Math.round(e-J0-i/(2*PI))}function approxTransit(e,i,a){return J0+(e+i)/(2*PI)+a}function solarTransitJ(e,i,a){return J2000+e+.0053*sin(i)-.0069*sin(2*a)}function hourAngle(e,i,a){return acos((sin(e)-sin(i)*sin(a))/(cos(i)*cos(a)))}function observerAngle(e){return-2.076*Math.sqrt(e)/60}function getSetJ(e,i,a,n,t,o,l){return solarTransitJ(approxTransit(hourAngle(e,a,n),i,t),o,l)}function moonCoords(e){var i=rad*(134.963+13.064993*e),a=rad*(93.272+13.22935*e),n=rad*(218.316+13.176396*e)+6.289*rad*sin(i),t=5.128*rad*sin(a),o=385001-20905*cos(i);return{ra:rightAscension(n,t),dec:declination(n,t),dist:o}}function hoursLater(e,i){return new Date(e.valueOf()+i*dayMs/24)}SunCalc.getTimes=function(e,i,a,n){var t,o,l,d,r,u=rad*-a,s=rad*i,c=observerAngle(n=n||0),m=julianCycle(toDays(e),u),f=approxTransit(0,u,m),p=solarMeanAnomaly(f),T=eclipticLongitude(p),g=declination(T,0),D=solarTransitJ(f,p,T),L={solarNoon:fromJulian(D),nadir:fromJulian(D-.5)};for(t=0,o=times.length;t<o;t+=1)r=D-((d=getSetJ(((l=times[t])[0]+c)*rad,u,s,g,m,p,T))-D),L[l[1]]=fromJulian(r),L[l[2]]=fromJulian(d);return L},SunCalc.getMoonPosition=function(e,i,a){var n=rad*-a,t=rad*i,o=toDays(e),l=moonCoords(o),d=siderealTime(o,n)-l.ra,r=altitude(d,t,l.dec),u=atan(sin(d),tan(t)*cos(l.dec)-sin(l.dec)*cos(d));return r+=astroRefraction(r),{azimuth:azimuth(d,t,l.dec),altitude:r,distance:l.dist,parallacticAngle:u}},SunCalc.getMoonIllumination=function(e){var i=toDays(e||getCurrentDate()),a=sunCoords(i),n=moonCoords(i),t=acos(sin(a.dec)*sin(n.dec)+cos(a.dec)*cos(n.dec)*cos(a.ra-n.ra)),o=atan(149598e3*sin(t),n.dist-149598e3*cos(t)),l=atan(cos(a.dec)*sin(a.ra-n.ra),sin(a.dec)*cos(n.dec)-cos(a.dec)*sin(n.dec)*cos(a.ra-n.ra));return{fraction:(1+cos(o))/2,phase:.5+.5*o*(l<0?-1:1)/Math.PI,angle:l}},SunCalc.getMoonTimes=function(e,i,a,n){var t=new Date(e);n?t.setUTCHours(0,0,0,0):t.setHours(0,0,0,0);for(var o,l,d,r,u,s,c,m,f,p,T,g,D,L=.133*rad,C=SunCalc.getMoonPosition(t,i,a).altitude-L,b=1;b<=24&&(o=SunCalc.getMoonPosition(hoursLater(t,b),i,a).altitude-L,m=((u=(C+(l=SunCalc.getMoonPosition(hoursLater(t,b+1),i,a).altitude-L))/2-o)*(c=-(s=(l-C)/2)/(2*u))+s)*c+o,p=0,(f=s*s-4*u*o)>=0&&(T=c-(D=Math.sqrt(f)/(2*Math.abs(u))),g=c+D,Math.abs(T)<=1&&p++,Math.abs(g)<=1&&p++,T<-1&&(T=g)),1===p?C<0?d=b+T:r=b+T:2===p&&(d=b+(m<0?g:T),r=b+(m<0?T:g)),!d||!r);b+=2)C=l;var S={};return d&&(S.rise=hoursLater(t,d)),r&&(S.set=hoursLater(t,r)),d||r||(S[m>0?"alwaysUp":"alwaysDown"]=!0),S},"object"==typeof exports&&"undefined"!=typeof module?module.exports=SunCalc:"function"==typeof define&&define.amd?define(SunCalc):window.SunCalc=SunCalc;