{
  "kind" : "p5js100",
  "screensaverFileName" : "Thereidoscope",
  "value" : "\/\/ Thereidoscope v1.11 Copyright 2021 Daïm Aggott-Hönsch\r\nvar initseed=parseInt(tokenData.hash.slice(2,10),16),seed=initseed;function frnd_dec(e,t){return fseed=initseed*e*t,fseed^=fseed<<13,fseed^=fseed>>17,((fseed^=fseed<<5)<0?1+~fseed:fseed)%1e3\/1e3}function frnd_num(e,t,n=0,i=1){return n+(i-n)*frnd_dec(e,t)}function frnd_int(e,t,n=0,i=1){return Math.floor(frnd_num(e,t,n,i+1))}function rnd_dec(){return seed^=seed<<13,seed^=seed>>17,((seed^=seed<<5)<0?1+~seed:seed)%1e3\/1e3}function rnd_num(e=0,t=1){return e+(t-e)*rnd_dec()}function rnd_int(e=0,t=1){return Math.floor(rnd_num(e,t+1))}function rnd_arr(e){return e[Math.floor(rnd_num(0,.99*e.length))]}function rnd_arrnz(e){return e[Math.floor(rnd_num(0,.99*(e.length-1)))+1]}function GetOrigin(){return[Math.round(1e3*(2*rnd_dec()-1))\/1e3,Math.round(1e3*(2*rnd_dec()-1))\/1e3]}function GetResolution(){return chance=rnd_int(0,99),chance<5?res=rnd_int(3,9):chance<25?res=rnd_int(10,19):chance<75?res=rnd_int(20,49):chance<95?res=rnd_int(50,59):res=rnd_int(60,101),res%2==0&&(res+=1),res}function GetHaste(){return 2**rnd_int(2,5)}function GetSpecie(){return rnd_int(0,1)}function GetTransience(){let e;return chance=rnd_int(1,100),e=chance<2?1:chance<4?2:chance<22?3:chance<57?4:chance<72?5:chance<86?6:chance<96?7:chance<98?8:9}function GetPalette(){return chance=rnd_int(1,111),chance<11?0:chance<20?1:chance<29?2:chance<38?3:chance<46?4:chance<54?5:chance<61?6:chance<68?7:chance<74?8:chance<80?9:chance<85?10:chance<90?11:chance<94?12:chance<98?13:chance<101?14:chance<104?15:chance<106?16:chance<108?17:chance<109?18:chance<110?19:20}function GetShape(){return chance=rnd_int(0,99),chance<60?2:chance<90?1:0}class Thereidoscope{constructor(){this.title=\"Thereidoscope\",this.version=1.11,this.author=\"Daïm Aggott-Hönsch\",this.year=2021,this.copyright=this.title+\" v\"+this.version.toFixed(2)+\" Copyright \"+this.year+\" \"+this.author,this.license=\"Thereidoscope outputs of officially authorized tokenizations via ArtBlocks.io, including extracts and recordings thereof, are licensed under the NFT License by \"+this.author+\".\",this.tokenData=tokenData,this.initseed=parseInt(this.tokenData.hash.slice(2,10),16),this.roundseed=this.initseed,this.paletteNames=[\"TŊR\",\"Arnolfini\",\"Orykto\",\"Pavo\",\"Rosa\",\"Tramonto\",\"Lotus\",\"Sterrennacht\",\"Medusa\",\"Sahara\",\"Tiszamente\",\"Hejmurba\",\"Santorini\",\"Zholbaris\",\"Aurum\",\"Hippotigris\",\"Solis\",\"Tenebra\",\"al-Bayt\",\"One\",\"Caligo\"],this.shapeNames=[\"Ω\",\"Α\",\"∅\"];Math.floor(16777215*Math.random()).toString(16),Math.floor(16777215*Math.random()).toString(16),Math.floor(16777215*Math.random()).toString(16),Math.floor(16777215*Math.random()).toString(16),Math.floor(16777215*Math.random()).toString(16),Math.floor(16777215*Math.random()).toString(16),Math.floor(16777215*Math.random()).toString(16);this.palettes=[[\"#000000\",[\"#2175BF\",\"#559BD9\"],[\"#068FB9\",\"#FCFDFC\"],[\"#D9BD9C\",\"#F2E2CE\"]],[\"#000000\",[\"#5e1d20\",\"#A0262b\"],[\"#06830d\",\"#304d0d\"],[\"#2e202f\",\"#4b546e\"]],[\"#000000\",[\"#048ABF\",\"#04B2D9\"],[\"#05DBF2\",\"#DCE0E4\"],[\"#EBB301\",\"#8C4E03\"]],[\"#000000\",[\"#A9896C\",\"#8F593D\"],[\"#011E71\",\"#074CB3\"],[\"#12552C\",\"#048957\"]],[\"#000000\",[\"#F0F0F2\",\"#D9B596\"],[\"#F2B6CC\",\"#D9738E\"],[\"#590212\",\"#A60321\"]],[\"#000000\",[\"#254559\",\"#000000\"],[\"#A67C49\",\"#F28B30\"],[\"#D96E30\",\"#A6381F\"]],[\"#000000\",[\"#FDF1FD\",\"#FEC4EA\"],[\"#729023\",\"#ADCB1C\"],[\"#CA345B\",\"#FEEBFE\"]],[\"#000000\",[\"#000000\",\"#202020\"],[\"#20308C\",\"#5377C6\"],[\"#BFAA2A\",\"#DFDB58\"]],[\"#000000\",[\"#3084F2\",\"#7ACEFB\"],[\"#090261\",\"#243CBF\"],[\"#010626\",\"#020540\"]],[\"#000000\",[\"#D1BCAC\",\"#D9C9BA\"],[\"#BF7E45\",\"#F2AE72\"],[\"#6595BF\",\"#BDD9F2\"]],[\"#000000\",[\"#2356BF\",\"#0F3BBF\"],[\"#E1DEDE\",\"#D1D1D1\"],[\"#D9B97E\",\"#BF9B6F\"]],[\"#000000\",[\"#FFFFFF\",\"#E6E6E6\"],[\"#505050\",\"#808080\"],[\"#F2A950\",\"#FDC666\"]],[\"#000000\",[\"#F29E38\",\"#EFD3AB\"],[\"#0656E9\",\"#097FFD\"],[\"#EAECF9\",\"#D7DDE7\"]],[\"#000000\",[\"#FFFFFF\",\"#E6E6E6\"],[\"#BF5B04\",\"#D78017\"],[\"#000000\",\"#202020\"]],[\"#000000\",[\"#FBFB65\",\"#F2B90C\"],[\"#F2A007\",\"#F2E635\"],[\"#A64F03\",\"#6F2903\"]],[\"#000000\",[\"#4E2915\",\"#D9C7B8\"],[\"#FFFFFF\",\"#E6E6E6\"],[\"#000000\",\"#202020\"]],[\"#000000\",[\"#FDC60399\",\"#FEF4A5\"],[\"#BF7E04\",\"#F27405\"],[\"#BF2604\",\"#D95204\"]],[\"#000000\",[\"#F2F2F2\",\"#737373\"],[\"#404040\",\"#0D0D0D\"],[\"#262626\",\"#000000\"]],[\"#000000\",[\"#FFFFFF\",\"#E6E6E6\"],[\"#8C783A\",\"#BA9E5E\"],[\"#000000\",\"#202020\"]],[\"#000000\",[\"#068FB999\",\"#7ACEFB99\"],[\"#9E674E\",\"#7E573E\"],[\"#B48B6C\",\"#C49B7C\"]],[\"#000000\",[\"#CCCC0099\",\"#7799DD99\"],[\"#068FB999\",\"#7ACEFB99\"],[\"#BDD9F299\",\"#6595BF99\"]]],this.features=getFeatures(this.tokenData),this.origin=this.features[0],this.resolution=this.features[1],this.transience=this.features[2],this.haste=this.features[3],this.essence=this.features[4],this.infusion=this.features[5],this.specie=this.features[6],this.c=this.origin,this.canvas=[],this.opacity=255,this.round=1,this.ez=0,this.az=1,this.needsThis=!1,this.needsNext=!1,this.isPaused=0,this.planeSpanDefault=2.25,this.planeSpanMin=.25,this.planeSpanMax=10,this.mch=\"\",this.planeSpan=2.25,this.planeMinX=0,this.planeMaxX=0,this.planeMinY=0,this.planeMaxY=0,this.planeWidth=0,this.planeHeight=0,this.planeXDelta=0,this.planeYDelta=0,this.escapeRadius=90,this.escapeSquare=63.63961,this.hdimDisplay=window.innerWidth,this.vdimDisplay=window.innerHeight,this.hdim=0,this.vdim=0,this.hdimOffset=0,this.vdimOffset=0,this.aspect=0,this.circleDiameter=0,this.offset=0,this.hres=0,this.vres=0,this.lastSecond=0,this.second=0,this.notFirstSecond=!1,this.realFPS=0,this.soughtFPS=25,this.setFPS=15,this.framerates=[],this.daim=loadImage(\"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAIc0lEQVR42uWdeVBWVRTAD24skhKRiKmV2ihp44ZLSVnmJDWjlriEmmapY2ouI4i4kBFujG3K4IYkSiQxpuRoTbnmkmNKtiqumJIgpYYLpsjpyuvz+773be\/d9+4C3z3qH14475zfe+++c7dzAcG75e4fnqUWNIGO0AdiYAIsgDTIILIcUmASDIcXIQKaQl2e5vAD0Br6wgzIhJ1wAspc3o5rcBr2QBYkQjS0I7BqAIDuEAu5xC2ap\/M85MEs6MnymWAJYCB5uM+Y8ppegPUwks3zwAZAZ0iC301vrc7C+xApO4B6MAK+Y9poHyKN5\/1yAgiFZPKw8vhylcESaCUXAF\/S1N3g\/AFfCMGyABhL2msRMcw\/EC8eQF84KDSQKyDfB4EAMqWIZrdCAxEAesMxaQL6YhJacwaQKl2vJgcCeAF4GPKl7Nidha48AES56cyIl5GsAUyUvoM\/jyWARdVijGMtKwA5dAaFYwBvBHtZAPiUzpjhiBjM\/ynYaTaAbFpTEPPEvAi7zQSQQ2vGhwRAoKi24IBZAFJoTQgg7q8TGxyZAGA8vQFfEQABYr8Ii4wCeJb+4k8T93PFfxRHGQEQBuX0l\/6bAGglQ1wQQQ\/AQH8vgbj\/rRyB0RXwowOwgv6iDxL3K7GrLLHhNzQAuhu55OcEwB08gifwpEE5hcfwMHmWPsAh2JreoqH6AZyjd78tsio\/Yhw2pLGp3PmokWsA2UbufwGyLJfxTRqrDuoB0NOI+0nIvsSa9EF0BeA4vfsNkE+JpBlG1whgpJH7v4ETgNsEtW7r5msDYGDIqxfyK6toLGzoGUAsvft+eAF5Fn\/9NmZ6AhAId+gB+ONz2Ak7miyRGIMf40UnAF6jsbKFewDzZB3pq18VXNmXHBpNue4BXJd5uDNfBeAonZ5g1wAGyz3e20cF4CpNK4Aw0zWAfLkBAJaqEDSn0VLiCkAb+cf8N6oAtKPT08c5gGT5AaSoAHSj05PtHECh\/ADU\/YzedHrKLQGRLYC+9GbFkV77SdL3Zy0FVcNstqUfrc1xjgCyaN0PQnFlkMHJM1sAxbQA1gsEMIIWQIUyQGIF0InW\/QgUWcbQtyfR9gCou0AFQgGMowew1B5ALp2aeBRbptED+MEeQBGNkpYouoygB1Bx91NoAdCCRoUPfklMuCVEKvAa\/oJzsY6RqKKXFUB\/OgDhGIaNhUiYGYsu3rYCSPDK\/VLLrADWeiWAneCjAPBhvMlBVjkNYQqAMDjllQBuQhcFQGfumx1kkZcVAFFe6j7CGAXAEK8FEK8AmOS1ABYoAOZ7LYAlCoA0rwWwUgGQ4bUAVisAPuF\/6XB8TAYAGQqAZfwvnYfpMgBYpQDgvg3Cj3Sjr8sAIFUBMJXvZYP\/n+TchPUN66ptcCWxAmAoP+fb41yb+b0LOB2bULYhMZiCB\/EtY\/YkKABe4uN8GK52MqhVjkk6VpQ3xzcwlThuKTOM2TROAdCF9IuYuz8Yr7oc2TuPPTRqWaz6zcnGrBqgAGjKflYw0ePw5gua9CSbCeAWdFMA1IF9bN2P1jTC+7gGTe+aCeAPaGYZEvuMpfsN8F9NAAp5A9gLtS0AElkCWKN5lH8yXwDp1kHRgezcb6xjmqOUL4BpVgDh7AC85+Dmb\/gqtsLWOBFLHOq68wQQZQXgA6WsAOx3cL+WTUx4TlU7hyeAENu5wc1s3PfBP1UmP2lXP0BVm8UPwM\/2k6OzWX0B7MOfazb3\/66EqBzawg\/AKnsAPdgACCIu25Yy8kzY1j+gcmgrPwDD7AHUgst0igJI3z7QzStQJOsrEKJeI\/QFnaJYYsYON92Z7SqTD9nVnta54CHBLACHHRdJDaPr4d2sMqSYtN\/tyZNQD\/3spK7D0sa72yl7kJ+8D\/vhTw51UQ4a7LXNMwtAkiMAHyjRr+h71X6uEhLM2EqJ03X+iJfwitP\/LyI\/X+pSSvC6OQDuQJizlaIf6VXUV\/gSGUoAm50vlY3Qq+h8dQUwyNVyeV3b5eIRqyeAMmt6TjWAMXqGNrG6AkhxvWGinvYtUzukADCLBkAzd3uGNE6SjEQ5CsW+sW3uN0010qIkEI+TD9lfAuUS6WTtwSk097+Dp42Ti7XM7ISRv74CxZ92SuRrzztH68HtGjwf\/JCWvcNxNdb9dK3b54trpPsV4K8VQHSNBDBDTwqNHTXO\/TP6coj4Sp04k0Ye0ZtFpr9okzvgCszDVGzjpK4PrsNNmIyNdMwB6E+klCfS\/dk28d47LueaykhMqkHbEbpMUnXYzRZ4ksmqkHesTV26qu4pz8MfobS5xJ4Q474\/VjqMINW+tzZEXXZ60tfPSDq9oSIAdHbS7bHkpRvtUFPiXtscowkVBSTV6OQEQEuXAC6605VlRkrNbN4AfB0GP4vuzSg5btXb4m4FgElJVffzRjBe5eQom7oVqrourrQUko6daWl1d4n8DM5V1WXafAZfd6XhGASZm1h5F\/9AKBGX4Sxs66TueVyAaTgFQ1399lFthy7oS629v9qEvYUQyCa5ena1cH+79iM39KfXXyi9+5msD1gYLbX7s3kcsRHJ6UQpvVJunfJifchKkNieolPZB4\/yPWZnFFyRxvlKmC7ioKVQ2C2F+79CuLijtsYbyT9sgpTpbfbMP2zNF5KFTaWkKkudxB+31xyWc3d+A7ST5bg9pXQgIUglJ+c3wjPmGG32kZvNyRvJNhnDBVgEbc0zmM2hq\/1hDYPcpJWQCzGee\/gyAFDWGcTCNtM2Y+2DRPt0uPIDsGAYBEvgAOVBHRWQDythuO2SluoGwFJCoBdMgDTYASfgmlunb8AZEl6lw1SIsixmZFl4H77uA00gAvqRHmU8iR6Wkvu7GjLIv6kwH2bCWHgFupH7XYefQVUAvFv+A\/f+r15i2q9MAAAAAElFTkSuQmCC\")}}function XY2C(e,t){return result=[th.planeMinX+float(e)*th.planeXDelta,th.planeMinY+float(t)*th.planeYDelta],result[0]=Math.round(1e3*result[0])\/1e3,result[1]=Math.round(1e3*result[1])\/1e3,result}function ComplexMultiply(e,t){return result=[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]],result}function ComplexAdd(e,t){return result=[e[0]+t[0],e[1]+t[1]],result}function ComplexSub(e,t){return result=[e[0]-t[0],e[1]-t[1]],result}function ComplexAbs(e){return sqrt(e[0]*e[0]+e[1]*e[1])}function Rect(e,t){return s=Math.sin(t),c=Math.cos(t),[e*c,e*s]}function FormatComplex(e){return e[1]<0?String(e[0])+String(e[1])+\"i\":String(e[0])+\"+\"+String(e[1])+\"i\"}\/\/ Thereidoscope v1.11 Copyright 2021 Daïm Aggott-Hönsch\r\nfunction GenerateState(t,e){var h=th.hdim\/th.circleDiameter\/2,i=th.vdim\/th.circleDiameter\/2,a=1,s=0,l=1,c=l,n=2021;for(which=frnd_int(-1*n,e,0,1),th.canvas[t].background(th.palettes[th.essence][1][which]),th.canvas[t].strokeJoin(ROUND),th.canvas[t].noStroke();h>=-1&&h<th.hres+1||i>=-1&&i<th.vres+1;){switch(z=XY2C(h*th.circleDiameter+th.offset,i*th.circleDiameter+th.offset),which=frnd_int(-1*n,e,0,1),SubWhichZ(z)){case 0:th.canvas[t].fill(th.palettes[th.essence][1][which]);break;case 1:th.canvas[t].fill(th.palettes[th.essence][2][which]);break;case 2:th.canvas[t].fill(th.palettes[th.essence][3][which])}th.canvas[t].circle(h*th.circleDiameter+th.offset,i*th.circleDiameter+th.offset,th.circleDiameter),1==a&&0==s?(h+=a,i+=s,(c-=1)<=0&&(a=0,s=1,c=l)):0==a&&1==s?(h+=a,i+=s,(c-=1)<=0&&(a=-1,s=0,c=l+=1)):-1==a&&0==s?(h+=a,i+=s,(c-=1)<=0&&(a=0,s=-1,c=l)):0==a&&-1==s&&(h+=a,i+=s,(c-=1)<=0&&(a=1,s=0,c=l+=1)),n+=1}for(h=(th.hdim\/th.circleDiameter-1)\/2,i=(th.vdim\/th.circleDiameter-1)\/2,a=1,s=0,c=l=1,n=629;h>=-1&&h<th.hres+1||i>=-1&&i<th.vres+1;){switch(z=XY2C(h*th.circleDiameter+th.offset,i*th.circleDiameter+th.offset),which=frnd_int(n,e,0,1),WhichZ(z)){case 0:th.canvas[t].fill(th.palettes[th.essence][1][which]);break;case 1:th.canvas[t].fill(th.palettes[th.essence][2][which]);break;case 2:th.canvas[t].fill(th.palettes[th.essence][3][which])}if(h>=0&&h<th.hres&&i>=0&&i<th.vres&&frnd_int(n,e,0,100)>=1&&th.canvas[t].circle(h*th.circleDiameter+th.offset,i*th.circleDiameter+th.offset,th.circleDiameter),frnd_int(n,e,0,100)<33){switch(which=frnd_int(896*n,e,0,1),WhichZ(z)){case 0:th.canvas[t].fill(th.palettes[th.essence][1][which]);break;case 1:th.canvas[t].fill(th.palettes[th.essence][2][which]);break;case 2:th.canvas[t].fill(th.palettes[th.essence][3][which])}switch(th.infusion){case 0:th.canvas[t].circle(h*th.circleDiameter+th.offset,i*th.circleDiameter+th.offset,th.circleDiameter\/3);break;case 1:th.canvas[t].triangle(h*th.circleDiameter+th.offset,i*th.circleDiameter+.9*th.offset-th.circleDiameter\/8,h*th.circleDiameter+th.offset-th.circleDiameter\/8,i*th.circleDiameter+.9*th.offset+th.circleDiameter\/8,h*th.circleDiameter+th.offset+th.circleDiameter\/8,i*th.circleDiameter+.9*th.offset+th.circleDiameter\/8)}}1==a&&0==s?(h+=a,i+=s,(c-=1)<=0&&(a=0,s=1,c=l)):0==a&&1==s?(h+=a,i+=s,(c-=1)<=0&&(a=-1,s=0,c=l+=1)):-1==a&&0==s?(h+=a,i+=s,(c-=1)<=0&&(a=0,s=-1,c=l)):0==a&&-1==s&&(h+=a,i+=s,(c-=1)<=0&&(a=1,s=0,c=l+=1)),n+=1}\"VVCCVCCVCVCV\"==th.mch&&th.canvas[t].image(th.daim,th.hdim\/2-64,th.vdim\/2-64)}function WhichZ(t){return freq=[0,0,0],freq[SubWhichZ([t[0]-.001,t[1]-.001])]++,freq[SubWhichZ([t[0]-.001,t[1]+.001])]++,freq[SubWhichZ([t[0]+0,t[1]+0])]++,freq[SubWhichZ([t[0]+.001,t[1]-.001])]++,freq[SubWhichZ([t[0]+.001,t[1]+.001])]++,freq[2]>=freq[0]&&freq[2]>=freq[1]?2:freq[1]>=freq[0]&&freq[1]>=freq[2]?1:0}function SubWhichZ(t){origz=t,escaped=!1;for(var e=0;e<=16;e++)if(0==th.specie?e%2==0?(t=ComplexMultiply(t,t),t=ComplexMultiply(t,ComplexSub(t,th.c)),t=ComplexMultiply(t,t),t=ComplexAdd(t,th.c),t=ComplexSub([0,0],t)):(t=ComplexMultiply(t,t),t=ComplexMultiply(t,t),t=ComplexAdd(t,th.c)):1==th.specie?e%2==0?(t=ComplexMultiply(t,t),t=ComplexAdd(t,th.c),t=ComplexSub([0,0],t)):(t=ComplexMultiply(t,t),t=ComplexMultiply(t,t),t=ComplexAdd(t,th.c)):2==th.specie?(t=ComplexMultiply(t,t),t=ComplexMultiply(t,th.c),t=ComplexMultiply(t,t),t=ComplexMultiply(t,t),t=ComplexAdd(t,th.c)):999==th.specie&&(e%2==0?(t=ComplexMultiply(ComplexSub(th.c,t),ComplexAdd(t,th.c)),t=ComplexAdd(t,th.c)):(t=ComplexMultiply(t,t),t=ComplexMultiply(t,t),t=ComplexMultiply(t,t),t=ComplexAdd(t,th.c))),ComplexAbs(t)>th.escapeRadius){escaped=!0;break}return t[0]<0-th.escapeSquare&&t[1]<0-th.escapeSquare||t[0]>th.escapeSquare&&t[1]>th.escapeSquare?1:t[0]>th.escapeSquare&&t[1]<0-th.escapeSquare||t[0]<0-th.escapeSquare&&t[1]>th.escapeSquare?2:0}var th;function setup(){th=new Thereidoscope,CalculateDisplayParameters(),th.canvas=[createGraphics(th.hdim,th.vdim),createGraphics(th.hdim,th.vdim)],frameRate(this.setFPS),pixelDensity(1),createCanvas(th.hdimDisplay,th.vdimDisplay),smooth(),windowResized(),th.lastSecond=second(),th.second=th.lastSecond}function draw(){if(th.second=second(),th.lastSecond!=th.second&&(th.notFirstSecond?(th.framerates.push(th.realFPS),th.realFPS=0):(th.notFirstSecond=!0,th.realFPS=0)),th.lastSecond=th.second,th.realFPS=th.realFPS+1,th.needsThis&&(GenerateState(th.ez,th.round),th.needsThis=!1),th.needsNext&&(GenerateState(th.az,(th.round+6991)%100019),th.needsNext=!1),th.hdimDisplay==window.innerWidth&&th.vdimDisplay==window.innerHeight||windowResized(),0==th.isPaused){if(th.opacity+=th.soughtFPS\/th.setFPS*th.haste,th.opacity>255){if(th.framerates.length>2){sum=0;for(var t=0;t<th.framerates.length;t++)sum+=th.framerates[t];th.setFPS=sum\/th.framerates.length+1,th.framerates=[]}frameRate(th.setFPS),th.opacity=0-th.transience*th.setFPS*(th.soughtFPS\/th.setFPS*th.haste),tEz=th.ez,tAz=th.az,th.ez=tAz,th.az=tEz,tint(255,255),th.round=(th.round+6991)%100019,th.needsNext=!0}th.c=ComplexMultiply(th.c,Rect(1,2*Math.PI\/8219))}tint(255,255),image(th.canvas[th.ez],0,0,th.hdimDisplay+1,th.vdimDisplay+1,th.hdimOffset,th.vdimOffset,th.hdimDisplay+1,th.vdimDisplay+1),tint(255,Math.max(Math.min(th.opacity,255),0)),image(th.canvas[th.az],0,0,th.hdimDisplay+1,th.vdimDisplay+1,th.hdimOffset,th.vdimOffset,th.hdimDisplay+1,th.vdimDisplay+1)}function touchStarted(){return mouseY>th.vdimDisplay\/4*3&&mouseX<th.hdimDisplay\/4?th.mch+=\"-\":mouseY<th.vdimDisplay\/4&&mouseX>th.hdimDisplay\/4*3?th.mch+=\"C\":mouseY<th.vdimDisplay\/4&&mouseX<th.hdimDisplay\/4?th.mch+=\"V\":mouseY>th.vdimDisplay\/4*3&&mouseX>th.hdimDisplay\/4*3?th.mch+=\" \":mouseY<th.vdimDisplay\/4?th.planeSpan>th.planeSpanMin&&mouseX>th.hdimDisplay\/4&&mouseX<=th.hdimDisplay\/4*3&&(th.planeSpan-=.1,focusChanged()):mouseY>th.vdimDisplay\/4*3&&mouseX>th.hdimDisplay\/4&&mouseX<=th.hdimDisplay\/4*3?th.planeSpan<th.planeSpanMax&&(th.planeSpan+=.1,focusChanged()):mouseY>=th.vdimDisplay\/4&&mouseY<=th.vdimDisplay\/4*3&&mouseX>th.hdimDisplay\/4&&mouseX<=th.hdimDisplay\/4*3?(th.isPaused=!th.isPaused,MCHUpdate(),th.mch=\"\"):mouseY>=th.vdimDisplay\/4&&mouseY<=th.vdimDisplay\/4*3&&(mouseX<th.hdimDisplay\/4||mouseX>th.hdimDisplay\/4*3)&&(th.planeSpan=th.planeSpanDefault,focusChanged()),!1}function keyPressed(){keyCode===UP_ARROW?th.planeSpan>th.planeSpanMin&&(th.planeSpan-=.1,focusChanged()):keyCode===DOWN_ARROW?th.planeSpan<th.planeSpanMax&&(th.planeSpan+=.1,focusChanged()):keyCode===ESCAPE?(th.planeSpan=th.planeSpanDefault,focusChanged()):32===keyCode&&(th.isPaused=!th.isPaused)}function MCHUpdate(){if(\"VCCVCC\"==th.mch)for(let t=1;t<=3;t++)for(let e=0;e<=1;e++)th.palettes[th.essence][t][e]=\"#\"+hex(255-unhex(th.palettes[th.essence][t][e].substring(1,3)),2)+hex(255-unhex(th.palettes[th.essence][t][e].substring(3,5)),2)+hex(255-unhex(th.palettes[th.essence][t][e].substring(5,7)),2)+th.palettes[th.essence][t][e].substring(7,9);else if(\"CCVCC\"==th.mch){let t=th.palettes[th.essence][1];th.palettes[th.essence][1]=th.palettes[th.essence][2],th.palettes[th.essence][2]=th.palettes[th.essence][3],th.palettes[th.essence][3]=t}}function windowResized(){CalculateDisplayParameters(),th.canvas=[createGraphics(th.hdim,th.vdim),createGraphics(th.hdim,th.vdim)],resizeCanvas(th.hdimDisplay,th.vdimDisplay),GenerateState(th.ez,th.round),GenerateState(th.az,(th.round+6991)%100019)}function focusChanged(){CalculateDisplayParameters(),th.needsThis=!0,th.needsNext=!0}function CalculateDisplayParameters(){th.hdimDisplay=window.innerWidth,th.vdimDisplay=window.innerHeight,th.hdimDisplay\/th.vdimDisplay>=1?(th.circleDiameter=th.vdimDisplay\/th.resolution\/2*2,th.vdim=th.vdimDisplay\/th.circleDiameter,th.vdim%2==0?th.vdim=th.vdim+1:th.vdim=th.vdim+0,th.vdim=th.vdim*th.circleDiameter,th.hdim=Math.ceil(th.hdimDisplay\/th.circleDiameter),th.hdim%2==0?th.hdim=th.hdim+1:th.hdim=th.hdim+0,th.hdim=th.hdim*th.circleDiameter,th.aspect=th.hdim\/th.vdim,th.planeMaxY=th.planeSpan,th.planeMaxX=th.planeSpan*th.aspect,th.planeMinY=0-th.planeMaxY,th.planeMinX=0-th.planeMaxX):(th.circleDiameter=th.hdimDisplay\/th.resolution\/2*2,th.hdim=th.hdimDisplay\/th.circleDiameter,th.hdim%2==0?th.hdim=th.hdim+1:th.hdim=th.hdim+0,th.hdim=th.hdim*th.circleDiameter,th.vdim=Math.ceil(th.vdimDisplay\/th.circleDiameter),th.vdim%2==0?th.vdim=th.vdim+1:th.vdim=th.vdim+0,th.vdim=th.vdim*th.circleDiameter,th.aspect=th.hdim\/th.vdim,th.planeMaxX=th.planeSpan,th.planeMaxY=th.planeSpan*(th.vdim\/th.hdim),th.planeMinX=0-th.planeMaxX,th.planeMinY=0-th.planeMaxY),th.hdimOffset=0,th.hdim-th.hdimDisplay>0&&(th.hdimOffset=Math.ceil((th.hdim-th.hdimDisplay)\/2)),th.vdimOffset=0,th.vdim-th.vdimDisplay>0&&(th.vdimOffset=Math.ceil((th.vdim-th.vdimDisplay)\/2)),th.planeWidth=th.planeMaxX-th.planeMinX,th.planeHeight=th.planeMaxY-th.planeMinY,th.planeXDelta=th.planeWidth\/th.hdim,th.planeYDelta=th.planeHeight\/th.vdim,th.hres=th.hdim\/th.circleDiameter,th.vres=th.vdim\/th.circleDiameter,th.offset=th.circleDiameter\/2}function calculateFeatures(t){oldseed=seed,seed=parseInt(t.hash.slice(2,10),16),paletteNames=[\"TŊR\",\"Arnolfini\",\"Orykto\",\"Pavo\",\"Rosa\",\"Tramonto\",\"Lotus\",\"Sterrennacht\",\"Medusa\",\"Sahara\",\"Tiszamente\",\"Hejmurba\",\"Santorini\",\"Zholbaris\",\"Aurum\",\"Hippotigris\",\"Solis\",\"Tenebra\",\"al-Bayt\",\"One\",\"Caligo\"],shapeNames=[\"Ω\",\"Α\",\"∅\"];var e=GetOrigin(),h=GetResolution(),i=10-GetTransience(),a=GetPalette(),s=GetShape(),l=GetHaste();GetSpecie();return seed=oldseed,{Origin:FormatComplex(e),Resolution:String(h),Transience:i,Haste:l,Essence:paletteNames[a],Infusion:shapeNames[s]}}function getFeatures(t){oldseed=seed,seed=parseInt(t.hash.slice(2,10),16);var e=GetOrigin(),h=GetResolution(),i=GetTransience();i=Math.max((.25*i)**5,.25*i+1);var a=GetPalette(),s=GetShape(),l=GetHaste(),c=GetSpecie();return seed=oldseed,[e,h,i,l,a,s,c]}"
}